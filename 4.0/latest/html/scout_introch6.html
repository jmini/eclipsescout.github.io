<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>5 A Larger Example</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,2,info --> 
<meta name="src" content="scout_intro.tex"> 
<meta name="date" content="2015-03-04 17:07:00"> 
<link rel="stylesheet" type="text/css" href="scout_intro.css"> 
</head><body 
>
    <!--l. 15--><div class="crosslinks"><p class="noindent">[<a 
href="scout_introap1.html" >next</a>] [<a 
href="scout_introch5.html" >prev</a>] [<a 
href="scout_introch5.html#tailscout_introch5.html" >prev-tail</a>] [<a 
href="#tailscout_introch6.html">tail</a>] [<a 
href="scout_intro.html" >up</a>] </p></div>
    <h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;5</span><br /><a 
 id="x59-600005"></a>A Larger Example</h2>
<!--l. 18--><p class="noindent" >In this chapter we will create the &#8221;My Contacts&#8221; Scout application. This
small<span class="footnote-mark"><a 
href="scout_intro60.html#fn1x7"><sup class="textsuperscript">1</sup></a></span><a 
 id="x59-60001f1"></a> 
application covers additional aspects of the Eclipse Scout framework. The presented demo
application borrows heavily from a Scout tutorial published 2012 in the German <span 
class="cmti-10">Java</span>
<span 
class="cmti-10">Magazin</span><span class="footnote-mark"><a 
href="scout_intro61.html#fn2x7"><sup class="textsuperscript">2</sup></a></span><a 
 id="x59-60002f2"></a> 
for the Scout release 3.8 (Juno). Compared to the 2012 tutorial, the version presented in this chapter has
been slightly polished and updated to the Scout release 4.0 (Luna).
<!--l. 28--><p class="indent" >    According to this step-by-step tutorial, we will build an outline based Scout application featuring a
navigation tree and pages to present information in tabular form. In addition, the application also shows
how to work with forms to enter and/or update data, menus and context menus. On the server side, we
show how to work with databases, how to use logging in Scout applications and how to include standard
Java libraries in the form of JAR files.
<!--l. 32--><p class="indent" >    The chapter is organized as follows. In the first section, the finished demo application is
explained from the user perspective. The remaining sections focus on the individual steps to
implement the &#8221;My Contacts&#8221; application. To be able to easily follow the text, we assume that
the reader is familiar with the &#8221;Hello World&#8221; tutorial and the Scout SDK as described in
Chapter&#x00A0;<a 
href="scout_introch5.html#x51-420004">4<!--tex4ht:ref: cha:tooling --></a>.
    <h3 class="sectionHead"><span class="titlemark">5.1   </span> <a 
 id="x59-610005.1"></a>The &#8221;My Contacts&#8221; Application</h3>
<!--l. 41--><p class="noindent" >The &#8221;My Contacts&#8221; application is a client server application to manage personal contacts. Persistence of
entered data is achieved through a database backend.
<!--l. 44--><p class="indent" >    As social networking services<span class="footnote-mark"><a 
href="scout_intro62.html#fn3x7"><sup class="textsuperscript">3</sup></a></span><a 
 id="x59-61001f3"></a> 
such as Facebook, LinkedIn or Xing are widely used, the application also provides an example integration with
the LinkedIn<span class="footnote-mark"><a 
href="scout_intro63.html#fn4x7"><sup class="textsuperscript">4</sup></a></span><a 
 id="x59-61002f4"></a> 
                                                                                 

                                                                                 
platform. The implemented integration allows to download the personal contacts into the local database.
In the local database it is possible to mix persons entered manually with contact data downloaded from
LinkedIn.
<!--l. 54--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-610031"></a>
                                                                                 

                                                                                 

<!--l. 55--><p class="noindent" ><img 
src="OneDayTutorial/figures/my_contacts_swt.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.1: </span><span  
class="content">The SWT client of the &#8221;My Contacts&#8221; application. </span></div><!--tex4ht:label?: x59-610031 -->
                                                                                 

                                                                                 
<!--l. 58--><p class="indent" >    </div><hr class="endfigure">
<!--l. 60--><p class="indent" >    After starting the Scout server application a client application may be started that then connects to
the server. In Figure&#x00A0;<a 
href="#x59-610031">5.1<!--tex4ht:ref: fig:my_contacts_swt --></a> the SWT desktop client is shown. In the background, the main
application window is visible showing a navigation tree on the left hand side. On the right side, a
table holds the elements corresponding to the selected tree node. Using an edit context menu
on the selected table row, a form to edit the relevant data may be opened as shown in the
example screen shot for &#8217;Alice&#8217;. Clicking on the link &#8217;Show Map ...&#8217; in the person form opens the
person&#8217;s location information in a map form using the data provided by Google Maps Image
API<span class="footnote-mark"><a 
href="scout_intro64.html#fn5x7"><sup class="textsuperscript">5</sup></a></span><a 
 id="x59-61004f5"></a> .
<!--l. 69--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-610052"></a>
                                                                                 

                                                                                 

<!--l. 70--><p class="noindent" ><img 
src="OneDayTutorial/figures/my_contacts_rayo_refresh.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.2: </span><span  
class="content">To refresh/generate an access token for reading LinkedIn contacts data select the
menu shown in the screen shot. </span></div><!--tex4ht:label?: x59-610052 -->
                                                                                 

                                                                                 
<!--l. 73--><p class="indent" >    </div><hr class="endfigure">
<!--l. 75--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-610063"></a>
                                                                                 

                                                                                 

<!--l. 76--><p class="noindent" ><img 
src="OneDayTutorial/figures/my_contacts_rayo_openauthurl.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/my_contacts_rayo_entercode.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.3: </span><span  
class="content">To refresh/create the access token click on the provided &#8217;Open Auth URL&#8217; link first
(left). Then, the security code field is enabled and the user can fill in the security code provided
on the LinkedIn web page. </span></div><!--tex4ht:label?: x59-610063 -->
                                                                                 

                                                                                 
<!--l. 81--><p class="indent" >    </div><hr class="endfigure">
<!--l. 83--><p class="indent" >    Before any LinkedIn data can be accessed from the &#8221;My Contacts&#8221; application an access token needs
to be retrieved from LinkedIn. To obtain such a token use the <span 
class="cmcsc-10">R<span 
class="small-caps">e</span><span 
class="small-caps">f</span><span 
class="small-caps">r</span><span 
class="small-caps">e</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> L<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">k</span><span 
class="small-caps">e</span><span 
class="small-caps">d</span>I<span 
class="small-caps">n</span> T<span 
class="small-caps">o</span><span 
class="small-caps">k</span><span 
class="small-caps">e</span><span 
class="small-caps">n</span> ...</span>
menu as shown in Figure&#x00A0;<a 
href="#x59-610052">5.2<!--tex4ht:ref: fig:my_contacts_rayo_refresh --></a>. This opens the refresh token form shown on the left side of
Figure&#x00A0;<a 
href="#x59-610063">5.3<!--tex4ht:ref: fig:my_contacts_rayo_openauthurl --></a>.
<!--l. 87--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-610074"></a>
                                                                                 

                                                                                 

<!--l. 88--><p class="noindent" ><img 
src="OneDayTutorial/figures/oauth_grant_access.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/oauth_security_code.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.4: </span><span  
class="content">The LinkedIn granting dialog steps shown in a web browser. In the first step (right)
confirm the access request, then the security code to create an access token is provided in the
second step (left). </span></div><!--tex4ht:label?: x59-610074 -->
                                                                                 

                                                                                 
<!--l. 94--><p class="indent" >    </div><hr class="endfigure">
<!--l. 96--><p class="indent" >    Clicking on the &#8217;Open Auth URL&#8217; link then opens the granting page provided by
LinkedIn shown on the left hand side of Figure&#x00A0;<a 
href="#x59-610074">5.4<!--tex4ht:ref: fig:oauth_security_code --></a>. After logging into your LinkedIn
account<span class="footnote-mark"><a 
href="scout_intro65.html#fn6x7"><sup class="textsuperscript">6</sup></a></span><a 
 id="x59-61008f6"></a> 
you can specify the desired access duration and confirm the &#8221;OAuth test for Scribe&#8221;
access<span class="footnote-mark"><a 
href="scout_intro66.html#fn7x7"><sup class="textsuperscript">7</sup></a></span><a 
 id="x59-61009f7"></a> 
to your LinkedIn data. If the authorization is successful, a security code as shown on the right side of
Figure&#x00A0;<a 
href="#x59-610074">5.4<!--tex4ht:ref: fig:oauth_security_code --></a> is presented by LinkedIn. This code needs then to be entered into the <span 
class="cmti-10">Security Code </span>field
as shown on the right side of Figure&#x00A0;<a 
href="#x59-610063">5.3<!--tex4ht:ref: fig:my_contacts_rayo_openauthurl --></a>. Then, click the <span 
class="cmcsc-10">OK </span>button to refresh the access
token.
<!--l. 108--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-610105"></a>
                                                                                 

                                                                                 

<!--l. 109--><p class="noindent" ><img 
src="OneDayTutorial/figures/my_contacts_rayo_updatecontacts.png" alt="PIC"  
> &#x00A0;
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.5: </span><span  
class="content">Executing the &#8217;Update LinkedIn Contacts for the first time imports the users LinkedIn
contacts into the &#8221;My Contacts&#8221; application.</span></div><!--tex4ht:label?: x59-610105 -->
                                                                                 

                                                                                 
<!--l. 112--><p class="indent" >    </div><hr class="endfigure">
<!--l. 114--><p class="indent" >    To import/update your LinkedIn contacts into your &#8221;My Contacts&#8221; application select the <span 
class="cmcsc-10">U<span 
class="small-caps">p</span><span 
class="small-caps">d</span><span 
class="small-caps">a</span><span 
class="small-caps">t</span><span 
class="small-caps">e</span></span>
<span 
class="cmcsc-10">L<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">k</span><span 
class="small-caps">e</span><span 
class="small-caps">d</span>I<span 
class="small-caps">n</span> C<span 
class="small-caps">o</span><span 
class="small-caps">n</span><span 
class="small-caps">t</span><span 
class="small-caps">a</span><span 
class="small-caps">c</span><span 
class="small-caps">t</span><span 
class="small-caps">s</span> </span>menu as shown in Figure&#x00A0;<a 
href="#x59-610105">5.5<!--tex4ht:ref: fig:my_contacts_rayo_updatecontacts --></a>. Once you have downloaded or entered a number of
persons in your &#8221;My Contacts&#8221; application, try to get yourself familiar with the application&#8217;s person
table. This is one of the very powerful Scout widgets. Columns may be filtered, moved, hidden or sorted
(including multi level sort) using the table header context menus <span 
class="cmcsc-10">O<span 
class="small-caps">r</span><span 
class="small-caps">g</span><span 
class="small-caps">a</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">z</span><span 
class="small-caps">e</span> C<span 
class="small-caps">o</span><span 
class="small-caps">l</span><span 
class="small-caps">u</span><span 
class="small-caps">m</span><span 
class="small-caps">n</span><span 
class="small-caps">s</span>... </span>menu and
<span 
class="cmcsc-10">C<span 
class="small-caps">o</span><span 
class="small-caps">l</span><span 
class="small-caps">u</span><span 
class="small-caps">m</span><span 
class="small-caps">n</span> F<span 
class="small-caps">i</span><span 
class="small-caps">l</span><span 
class="small-caps">t</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span>... </span>menu.
<!--l. 119--><p class="indent" >    Editing and viewing of person data is available by the <span 
class="cmcsc-10">E<span 
class="small-caps">d</span><span 
class="small-caps">i</span><span 
class="small-caps">t</span> P<span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">s</span><span 
class="small-caps">o</span><span 
class="small-caps">n</span>... </span>context menu on a selected
row. To manually add a person use the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">w</span> P<span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">s</span><span 
class="small-caps">o</span><span 
class="small-caps">n</span>... </span>context menu available on the table header or in
the white area outside the displayed columns.
<!--l. 122--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-610116"></a>
                                                                                 

                                                                                 

<!--l. 123--><p class="noindent" ><img 
src="OneDayTutorial/figures/my_contacts_rayo_filteredcontacts.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.6: </span><span  
class="content">After importing the contacts from LinkedIn the data is shown in the person page. The
filter applied on the headline column is indicated by the filter icon. In the front, the filter form
shows the filter criteria &#8217;Eclipse&#8217;.</span></div><!--tex4ht:label?: x59-610116 -->
                                                                                 

                                                                                 
<!--l. 127--><p class="indent" >    </div><hr class="endfigure">
<!--l. 129--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-610127"></a>
                                                                                 

                                                                                 

<!--l. 130--><p class="noindent" ><img 
src="OneDayTutorial/figures/my_contacts_rapweb_excelexport.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.7: </span><span  
class="content">The &#8221;My Contacts&#8221; application running in the browser as web application. The Excel
sheet shown in the front is exported from the person page using the &#8217;Tools/Export to Excel&#8217; menu.
</span></div><!--tex4ht:label?: x59-610127 -->
                                                                                 

                                                                                 
<!--l. 134--><p class="indent" >    </div><hr class="endfigure">
<!--l. 136--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-610138"></a>
                                                                                 

                                                                                 

<!--l. 137--><p class="noindent" ><img 
src="OneDayTutorial/figures/my_contacts_rapmobile_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/my_contacts_rapmobile_2.png" alt="PIC"  
> &#x00A0;
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.8: </span><span  
class="content">The &#8221;My Contacts&#8221; application running on an iPhone device. On the left hand side,
the person page is shown. The person form is shown on the right. </span></div><!--tex4ht:label?: x59-610138 -->
                                                                                 

                                                                                 
<!--l. 142--><p class="indent" >    </div><hr class="endfigure">
<!--l. 144--><p class="indent" >    In Figure&#x00A0;<a 
href="#x59-610127">5.7<!--tex4ht:ref: fig:my_contacts_rapweb_excelexport --></a> the &#8221;My Contacts&#8221; application is running in a web browser. In this example, the
<span 
class="cmcsc-10">T<span 
class="small-caps">o</span><span 
class="small-caps">o</span><span 
class="small-caps">l</span><span 
class="small-caps">s</span>&#8212;E<span 
class="small-caps">x</span><span 
class="small-caps">p</span><span 
class="small-caps">o</span><span 
class="small-caps">r</span><span 
class="small-caps">t</span> <span 
class="small-caps">t</span><span 
class="small-caps">o</span> E<span 
class="small-caps">x</span><span 
class="small-caps">c</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span> </span>menu is used to export the selected row into an Excel sheet. Finally, the
&#8221;My Contacts&#8221; application is also running on iPhone and Android mobile devices out of the box. Two
example screens are provided in Figure&#x00A0;<a 
href="#x59-610138">5.8<!--tex4ht:ref: fig:my_contacts_rapmobile --></a>.
<!--l. 149--><p class="indent" >    Once you no longer feel confident about having the &#8221;My Contacts&#8221; application accessing you data
you can revoke this access permission in the LinkedIn menu &#8221;Privacy and Settings&#8221;. In the lower part of
the settings page switch to the tab &#8221;Groups, Companies and Applications&#8221; and click on the link &#8221;View
your applications&#8221;. There, you will find again the partner name &#8221;OAuth test for Scribe&#8221;. To revoke the
access, select the associated checkbox and click the &#8221;Remove&#8221; button. The next time you try to refresh
your LinkedIn data from the &#8221;My Contacts&#8221; application will result in an Error message. Before you can
again access data from your LinkedIn account you just need to refresh the access token as described
above.
<!--l. 156--><p class="indent" >    To run the &#8221;My Contacts&#8221; Scout application without implementing it first, you may take advantage of
the fact that the application is hosted in the same Github repository as this book. If you are familiar with
Github<span class="footnote-mark"><a 
href="scout_intro67.html#fn8x7"><sup class="textsuperscript">8</sup></a></span><a 
 id="x59-61014f8"></a> , fork the Scout
Book repository<span class="footnote-mark"><a 
href="scout_intro68.html#fn9x7"><sup class="textsuperscript">9</sup></a></span><a 
 id="x59-61015f9"></a> 
and start from there. Alternatively, you can follow the description provided in the Scout
wiki<span class="footnote-mark"><a 
href="scout_intro69.html#fn10x7"><sup class="textsuperscript">10</sup></a></span><a 
 id="x59-61016f10"></a> 
to download, install and run the &#8221;My Contacts&#8221; application.
    <h3 class="sectionHead"><span class="titlemark">5.2   </span> <a 
 id="x59-620005.2"></a>Setting up the new Scout project</h3>
<!--l. 172--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-620019"></a>
                                                                                 

                                                                                 

<!--l. 173--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_project_contacts_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_project_contacts_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.9: </span><span  
class="content">Start with creating a new Scout project. </span></div><!--tex4ht:label?: x59-620019 -->
                                                                                 

                                                                                 
<!--l. 177--><p class="noindent" ></div><hr class="endfigure">
<!--l. 179--><p class="indent" >    The initial code for the &#8221;My Contacts&#8221; application is generated using the <span 
class="cmti-10">New Scout Project </span>wizard
as described in Section&#x00A0;<a 
href="scout_introch5.html#x51-470004.4.1">4.4.1<!--tex4ht:ref: sec:wizard_new_project --></a>. For the <span 
class="cmti-10">Project Name </span>field use the name <span 
class="cmtt-10">org.eclipsescout.contacts </span>as
shown on the left side of Figure&#x00A0;<a 
href="#x59-620019">5.9<!--tex4ht:ref: fig:new_project_contacts --></a> and click on the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button. In the second wizard step
select the application template <span 
class="cmti-10">Outline Tree and Table Form </span>as shown on the right side of
Figure&#x00A0;<a 
href="#x59-620019">5.9<!--tex4ht:ref: fig:new_project_contacts --></a>.
<!--l. 183--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6200210"></a>
                                                                                 

                                                                                 

<!--l. 184--><p class="noindent" ><img 
src="OneDayTutorial/figures/project_contacts_explorer.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/project_contacts_properties.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.10: </span><span  
class="content">The setting of the <span 
class="cmti-10">Technology </span>section in the Scout Object Properties of the &#8221;My
Contacts&#8221; application.</span></div><!--tex4ht:label?: x59-6200210 -->
                                                                                 

                                                                                 
<!--l. 188--><p class="indent" >    </div><hr class="endfigure">
<!--l. 190--><p class="indent" >    After the Scout SDK has created the initial application code select the top-level <span 
class="cmti-10">org.eclipsescout.contacts</span>
node in the Scout Explorer. In the technology section of the corresponding Scout Object Properties select
the Derby database driver, the Docx4j support and the Rayo look and feel as shown on the right side
of Figure&#x00A0;<a 
href="#x59-6200210">5.10<!--tex4ht:ref: fig:project_contacts_properties --></a>. In case you have not yet used the Scout Docx4j support or the Rayo look
and feel components, the Scout SDK will need to download these packages from the Eclipse
Marketplace<span class="footnote-mark"><a 
href="scout_intro70.html#fn11x7"><sup class="textsuperscript">11</sup></a></span><a 
 id="x59-62003f11"></a> 
first.
    <!--l. 204--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 204--><p class="indent" >    <a 
 id="x59-62004r1"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-62005"></a>

     <div class="caption" 
><span class="id">Listing&#x00A0;5.1:
     </span><span  
class="content">The
     <span 
class="cmtt-10">ExportToExcelMenu</span>
     class
     added
     by
     the
     Docx4j
     support
     to
     the
     application&#8217;s
     tools
     menu.</span></div><!--tex4ht:label?: x59-62004r5.2 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62006r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(20.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62007r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ExportToExcelMenu</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractExtensibleMenu</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62008r3"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62009r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62010r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredText</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62011r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">TEXTS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">ExportToExcelMenu</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62012r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62013r8"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62014r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62015r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">execAction</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62016r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">getOutline</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">!=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&amp;&amp;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getOutline</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getActivePage</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">!=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><a 
 id="dx59-62017"></a><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62018r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ScoutXlsxSpreadsheetAdapter</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">s</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-62019"></a><span 
class="cmssi-10">ScoutXlsxSpreadsheetAdapter</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62020r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">File</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">xlsx</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">s</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">exportPage</span><span 
class="cmss-10">(</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">0,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">0,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getOutline</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getActivePage</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62021r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SERVICES</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getService</span><span 
class="cmss-10">(</span><a 
 id="dx59-62022"></a><span 
class="cmssi-10">IShellService</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">)</span><span 
class="cmss-10">.</span><a 
 id="dx59-62023"></a><span 
class="cmssi-10">shellOpen</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">xlsx</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getAbsolutePath</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62024r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62025r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62026r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 206--><p class="indent" >    Remark: Adding the Docx4j support will add the <span 
class="cmcsc-10">E<span 
class="small-caps">x</span><span 
class="small-caps">p</span><span 
class="small-caps">o</span><span 
class="small-caps">r</span><span 
class="small-caps">t</span> <span 
class="small-caps">t</span><span 
class="small-caps">o</span> E<span 
class="small-caps">x</span><span 
class="small-caps">c</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span> </span>menu under tools menu on the
application&#8217;s desktop. This presence of this feature will then allow to export contacts shown in the
application to an Excel sheet. As shown in Listing&#x00A0;<a 
href="#x59-62004r1">5.1<!--tex4ht:ref: lst:mycontacts.desktop.menu.exportoexcel --></a>, the <span 
class="cmtt-10">ScoutXlsxSpreadsheetAdapter </span>first creates
an excel file based on the currently active page in the <span 
class="cmtt-10">execAction </span>method. Then the file is opened on the
client using the <span 
class="cmtt-10">shellOpen </span>method.
<!--l. 211--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6202711"></a>
                                                                                 

                                                                                 

<!--l. 212--><p class="noindent" ><img 
src="OneDayTutorial/figures/desktop_explorer.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/desktop_properties.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.11: </span><span  
class="content">Configure the application name &#8221;My Contacts&#8221; in the title field of the Desktop&#8217;s
properties. </span></div><!--tex4ht:label?: x59-6202711 -->
                                                                                 

                                                                                 
<!--l. 216--><p class="indent" >    </div><hr class="endfigure">
<!--l. 218--><p class="indent" >    After this initial project setup step we first define the application&#8217;s name shown on the main dialog.
For this, select the <span 
class="cmti-10">Desktop </span>node under the orange client node in the Scout Explorer. This opens it&#8217;s
Scout Object Properties as shown in Figure&#x00A0;<a 
href="#x59-6202711">5.11<!--tex4ht:ref: fig:desktop_properties --></a>. In the <span 
class="cmti-10">Title </span>field enter the string &#8221;My Contacts&#8221; and
create a new translated text entry.
    <!--l. 230--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 230--><p class="indent" >    <a 
 id="x59-62028r2"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-62029"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.2:
    </span><span  
class="content">The
    <span 
class="cmtt-10">execOpened</span>
    method
    of
    desktop
    class
    of
    the
    &#8221;My
    Contacts&#8221;
    application.
    The
    application&#8217;s
    organisation
    into
    a
    tree
    and
    a
    table
    form
    is
    defined
    here.</span></div><!--tex4ht:label?: x59-62028r5.2 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62030r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62031r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-62032"></a><span 
class="cmssi-10">execOpened</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62033r3"></a></span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">//</span><span 
class="cmti-10">If</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">it</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">is</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">a</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">mobile</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">or</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">tablet</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">device</span><span 
class="cmti-10">,</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">the</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">DesktopExtension</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">in</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">the</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">mobile</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">plugin</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">takes</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">care</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">of</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">starting</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">the</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">correct</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">forms</span><span 
class="cmti-10">.</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62034r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(!</span><a 
 id="dx59-62035"></a><span 
class="cmssi-10">UserAgentUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">isDesktopDevice</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62036r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62037r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62038r7"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62039r8"></a></span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">//</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">outline</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">tree</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62040r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">DefaultOutlineTreeForm</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">treeForm</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">DefaultOutlineTreeForm</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62041r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">treeForm</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">setIconId</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Icons</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">EclipseScout</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62042r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">treeForm</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">startView</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62043r12"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62044r13"></a></span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">//</span><span 
class="cmti-10">outline</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">table</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62045r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">DefaultOutlineTableForm</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">tableForm</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">DefaultOutlineTableForm</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62046r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">tableForm</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">setIconId</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Icons</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">EclipseScout</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62047r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">tableForm</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">startView</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62048r17"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62049r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">IOutline</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">firstOutline</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">CollectionUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">firstElement</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">getAvailableOutlines</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62050r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">firstOutline</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">!=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62051r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">setOutline</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">firstOutline</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62052r21"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62053r22"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-62054r23"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 232--><p class="indent" >    As shown in Listing&#x00A0;<a 
href="#x59-62028r2">5.2<!--tex4ht:ref: lst:mycontacts.desktop.execopened --></a> the application&#8217;s organisation into a tree and a table form is explicitly
defined in method <span 
class="cmtt-10">execOpened</span>. Click on the <span 
class="cmti-10">Exec Opened </span>link in the desktop&#8217;s Scout Object Properties
to access the Java code of this method. First, using the <span 
class="cmtt-10">UserAgentUtility </span>class, the method checks if
the client is working with a desktop, a web or a mobile client. If the user is not working with a desktop
client, <span 
class="cmtt-10">execOpened </span>returns immediately and the tree and table setup is not used. Instead, the
<span 
class="cmtt-10">MobileHomeForm </span>defined in plugin <span 
class="cmti-10">org.eclipsescout.contacts.client.mobile </span>is used. In case the user is
working with a web client or a desktop client, the default tree and table forms are created and started.
Finally, the currently active outline is set to the <span 
class="cmtt-10">StandardOutline</span>, as this is the only outline defined in
this application.
    <h3 class="sectionHead"><span class="titlemark">5.3   </span> <a 
 id="x59-630005.3"></a>Adding the Person Page</h3>
<!--l. 243--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6300112"></a>
                                                                                 

                                                                                 

<!--l. 244--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_page_person_contextmenu.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.12: </span><span  
class="content">Create a new page as a child page of the standard outline. </span></div><!--tex4ht:label?: x59-6300112 -->
                                                                                 

                                                                                 
<!--l. 247--><p class="noindent" ></div><hr class="endfigure">
<!--l. 249--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6300213"></a>
                                                                                 

                                                                                 

<!--l. 250--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_page_person_1.png" alt="PIC"  
>    <img 
src="OneDayTutorial/figures/new_page_person_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.13: </span><span  
class="content">Create a new page with the corresponding SDK wizard. To present the list of persons
in a table, choose the template <span 
class="cmtt-10">AbstractPageWithTable </span>as shown on the left.</span></div><!--tex4ht:label?: x59-6300213 -->
                                                                                 

                                                                                 
<!--l. 254--><p class="indent" >    </div><hr class="endfigure">
<!--l. 256--><p class="indent" >    The first UI component we add to the application is the person page. For the desktop clients, this
page is represented as a table that will list all available persons in the database of the &#8221;My
Contacts&#8221; application. To start the <span 
class="cmti-10">New Page </span>wizard use the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">w</span> P<span 
class="small-caps">a</span><span 
class="small-caps">g</span><span 
class="small-caps">e</span>... </span>context menu on the
<span 
class="cmti-10">Child Pages </span>folder as shown in Figure&#x00A0;<a 
href="#x59-6300213">5.13<!--tex4ht:ref: fig:new_page_person --></a>. On the first wizard step select the template
<span 
class="cmti-10">AbstractPageWithTable </span>and click the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button. On the second wizard step, provide the
page name &#8221;Person&#8221; to create a new translated text entry at the same time. Make sure the
other fields are filled in as shown in Figure&#x00A0;<a 
href="#x59-6300213">5.13<!--tex4ht:ref: fig:new_page_person --></a> and click the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> </span>button to close the
wizard.
    <!--l. 270--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 270--><p class="indent" >    <a 
 id="x59-63003r3"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-63004"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.3:
  </span><span  
class="content">The
  <span 
class="cmtt-10">execCreateChildPages</span>
  method
  of
  the
  standard
  outline.
  At
  the
  current
  implementation
  step
  the
  company
  table
  page
  is
  not
  (yet)
  added.</span></div><!--tex4ht:label?: x59-63003r5.3 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63005r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63006r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-63007"></a><span 
class="cmssi-10">execCreateChildPages</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">List</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmssi-10">IPage</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">pageList</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63008r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonTablePage</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">personTablePage</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonTablePage</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63009r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">pageList</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">add</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">personTablePage</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63010r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">CompanyTablePage</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">companyTablePage</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">CompanyTablePage</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63011r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">pageList</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">add</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">companyTablePage</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63012r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63013r8"></a></span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 272--><p class="indent" >    Listing&#x00A0;<a 
href="#x59-63003r3">5.3<!--tex4ht:ref: lst:mycontacts.desktop.outline.personpage --></a> shows the created method <span 
class="cmtt-10">execCreateChildPages </span>that links the newly created person
page to the standard outline. Note that your code will only look the same once you have added the
company page in a later step of the implementation of this application.
<!--l. 275--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6301414"></a>
                                                                                 

                                                                                 

<!--l. 276--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_column_personid_contextmenu.png" alt="PIC"  
> <br 
class="newline" /> <img 
src="OneDayTutorial/figures/new_column_personid_1.png" alt="PIC"  
>    <img 
src="OneDayTutorial/figures/new_column_personid_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.14: </span><span  
class="content">Add columns to the person page.</span></div><!--tex4ht:label?: x59-6301414 -->
                                                                                 

                                                                                 
<!--l. 282--><p class="indent" >    </div><hr class="endfigure">
<!--l. 284--><p class="indent" >    Now, drill down to the <span 
class="cmti-10">Columns </span>folder under the <span 
class="cmti-10">PersonTablePage </span>node as shown in Figure&#x00A0;<a 
href="#x59-6301515">5.15<!--tex4ht:ref: fig:new_column_personid --></a>.
Here we can add the desired table columns to the person page. Start with the column that will hold the
person id. For this, start the column wizard as shown on the left side of Figure&#x00A0;<a 
href="#x59-6301515">5.15<!--tex4ht:ref: fig:new_column_personid --></a> and select the string
column template. In the second wizard step, enter &#8221;PersonId&#8221; into the <span 
class="cmti-10">Class Name </span>field, select the radio
button <span 
class="cmti-10">Create one more column </span>and click on the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> </span>button. This will restart the column
wizard to enter the next columns. Create the remaining string columns with the following
names.
     <ul class="itemize1">
     <li class="itemize">First Name
     </li>
     <li class="itemize">Last Name
     </li>
     <li class="itemize">Headline</li></ul>
<!--l. 298--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6301515"></a>
                                                                                 

                                                                                 

<!--l. 299--><p class="noindent" ><img 
src="OneDayTutorial/figures/person_id_column.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/person_id_property.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.15: </span><span  
class="content">Configure the <span 
class="cmti-10">PersonId  </span>column. Check property <span 
class="cmti-10">Primary Key  </span>under the section
<span 
class="cmti-10">Advanced Properties </span>(right).</span></div><!--tex4ht:label?: x59-6301515 -->
                                                                                 

                                                                                 
<!--l. 303--><p class="indent" >    </div><hr class="endfigure">
    <!--l. 312--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 312--><p class="indent" >    <a 
 id="x59-63016r4"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-63017"></a>

     <div class="caption" 
><span class="id">Listing&#x00A0;5.4:
     </span><span  
class="content">The
     person
     id
     and
     the
     first
     name
     columns
     of
     the
     <span 
class="cmtt-10">PersonTablePage</span>
     class.</span></div><!--tex4ht:label?: x59-63016r5.3 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63018r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(10.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63019r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonIdColumn</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractStringColumn</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63020r3"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63021r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63022r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">boolean</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredDisplayable</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63023r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">false</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63024r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63025r8"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63026r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63027r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">boolean</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredPrimaryKey</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63028r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">true</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63029r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63030r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63031r14"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63032r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(20.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63033r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">FirstNameColumn</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractStringColumn</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63034r17"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63035r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63036r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredHeaderText</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63037r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">TEXTS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">FirstName</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63038r21"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63039r22"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 314--><p class="indent" >    Once you have created all these columns we will mark the person id column as the primary key
column for the person page. In the Scout Explorer select the <span 
class="cmti-10">PersonIdColumn </span>node to open the
corresponding Scout Object Properties. In this form, deselect the <span 
class="cmti-10">Displayable </span>property to always hide this
technical column from the end user. In the properties <span 
class="cmti-10">Advanced Properties </span>section check the <span 
class="cmti-10">Primary Key</span>
property. The resulting Java code for the primary key column and the first name column is provided in
Listing&#x00A0;<a 
href="#x59-63043r5">5.5<!--tex4ht:ref: lst:mycontacts.desktop.outline.personpage.columns --></a>.
<!--l. 320--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6304216"></a>
                                                                                 

                                                                                 

<!--l. 321--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_bean_companyid_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_bean_companyid.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.16: </span><span  
class="content">Add the <span 
class="cmti-10">CompanyId </span>variable to the person page.</span></div><!--tex4ht:label?: x59-6304216 -->
                                                                                 

                                                                                 
<!--l. 325--><p class="indent" >    </div><hr class="endfigure">
    <!--l. 334--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 334--><p class="indent" >    <a 
 id="x59-63043r5"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-63044"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.5:
  </span><span  
class="content">The
  company
  id
  variable
  of
  the
  <span 
class="cmtt-10">PersonTablePage</span>
  class.</span></div><!--tex4ht:label?: x59-63043r5.3 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63045r1"></a></span><span 
class="cmssi-10">@PageData</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">PersonTablePageData</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63046r2"></a></span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonTablePage</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractPageWithTable</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmssi-10">PersonTablePage</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">Table</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63047r3"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63048r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_companyId</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63049r5"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63050r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@FormData</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63051r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getCompanyId</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63052r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_companyId</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63053r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63054r10"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63055r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@FormData</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63056r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">setCompanyId</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">companyId</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63057r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_companyId</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">companyId</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63058r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-63059r15"></a></span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 336--><p class="indent" >    As we will later add and link the person page with a company page, we add a company id variable to
the person page as shown in Figure&#x00A0;<a 
href="#x59-6304216">5.16<!--tex4ht:ref: fig:new_bean_companyid --></a>. For the Java representation of such variables the standard bean
pattern is used as shown in Listing&#x00A0;<a 
href="#x59-63043r5">5.5<!--tex4ht:ref: lst:mycontacts.desktop.outline.personpage.columns --></a>.
    <h3 class="sectionHead"><span class="titlemark">5.4   </span> <a 
 id="x59-640005.4"></a>Adding the Company Page</h3>
<!--l. 342--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6400117"></a>
                                                                                 

                                                                                 

<!--l. 343--><p class="noindent" ><img 
src="OneDayTutorial/figures/add_existing_page_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/add_existing_page.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.17: </span><span  
class="content">Add the person page below the the company page.</span></div><!--tex4ht:label?: x59-6400117 -->
                                                                                 

                                                                                 
<!--l. 347--><p class="noindent" ></div><hr class="endfigure">
    <!--l. 356--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 356--><p class="indent" >    <a 
 id="x59-64002r6"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-64003"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.6:
    </span><span  
class="content">Linking
    the
    <span 
class="cmtt-10">PersonTablePage</span>
    with
    the
    parent
    <span 
class="cmtt-10">CompanyTablePage</span>.</span></div><!--tex4ht:label?: x59-64002r5.4 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-64004r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-64005r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">IPage</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">execCreateChildPage</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">ITableRow</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">row</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-64006r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonTablePage</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">childPage</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonTablePage</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-64007r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">childPage</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">setCompanyId</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">getTable</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getCompanyIdColumn</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">row</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-64008r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">childPage</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-64009r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 358--><p class="indent" >    After adding the person page, we also add a company page under the <span 
class="cmti-10">Child Pages </span>node to the
standard outline. To add the company page we use the same wizards as described in the previous section
for the person page. For the <span 
class="cmti-10">Name </span>field we enter the new translated text &#8221;Company&#8221; and the columns to
add are the following.
     <ul class="itemize1">
     <li class="itemize">Company Id
     </li>
     <li class="itemize">Name
     </li>
     <li class="itemize">Location</li></ul>
<!--l. 368--><p class="indent" >    As in the case of the person table page, the company id column is used as a primary key column.
The <span 
class="cmti-10">Displayable </span>property needs to be set to false and the <span 
class="cmti-10">Primary Key </span>property to true. Now we can link
the person page to the company page using the <span 
class="cmcsc-10">A<span 
class="small-caps">d</span><span 
class="small-caps">d</span> E<span 
class="small-caps">x</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">t</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">g</span> P<span 
class="small-caps">a</span><span 
class="small-caps">g</span><span 
class="small-caps">e</span>... </span>context menu as shown on the
left side of Figure&#x00A0;<a 
href="#x59-6400117">5.17<!--tex4ht:ref: fig:add_existing_page --></a>. In the <span 
class="cmti-10">Link Page </span>wizard, the person page can then be selected according
to the right side of Figure&#x00A0;<a 
href="#x59-6400117">5.17<!--tex4ht:ref: fig:add_existing_page --></a>. In the Java code generated by the Scout SDK the setting
of the company id attribute is automatically inserted in method <span 
class="cmtt-10">execCreateChildPages</span>.
Please note that this convenience added by the Scout SDK wizard only works if the child page
defines variables with a naming that matches the defined primary key columns of the parent
table.
    <h3 class="sectionHead"><span class="titlemark">5.5   </span> <a 
 id="x59-650005.5"></a>Installing the Database</h3>
<!--l. 378--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6500118"></a>
                                                                                 

                                                                                 

<!--l. 379--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_service_derby_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_service_derby.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.18: </span><span  
class="content">Add the service to access the Derby database under folder <span 
class="cmti-10">SQL Services</span>. </span></div><!--tex4ht:label?: x59-6500118 -->
                                                                                 

                                                                                 
<!--l. 383--><p class="noindent" ></div><hr class="endfigure">
<!--l. 385--><p class="indent" >    To access a database we first need to install a database service. For the &#8221;My Contacts&#8221; application,
this is done using the <span 
class="cmti-10">New SQL Service </span>wizard on the Scout server under the <span 
class="cmti-10">SQL Services </span>folder
as shown in Figure&#x00A0;<a 
href="#x59-6500118">5.18<!--tex4ht:ref: fig:new_service_derby --></a>. In the first wizard step shown on the right side of the figure, use
&#8221;DerbySqlService&#8221; for the <span 
class="cmti-10">Class Name </span>field. From the drop-down list in the <span 
class="cmti-10">Super Class </span>field choose the
<span 
class="cmtt-10">AbstractDerbySqlService </span>and click on the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> </span>button.
    <!--l. 397--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 397--><p class="indent" >    <a 
 id="x59-65002r7"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-65003"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.7:
  </span><span  
class="content">Setting
  up
  the
  database
  parameters
  in
  the
  Scout
  server&#8217;s
  <span 
class="cmtt-10">config.ini</span>
  file.</span></div><!--tex4ht:label?: x59-65002r5.5 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65004r1"></a></span><span 
class="cmss-10">###</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">DataSource</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65005r2"></a></span><span 
class="cmssi-10">org</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">eclipsescout</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">contacts</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">server</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">services</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">common</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">sql</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">DerbySqlService</span><span 
class="cmss-10">#</span><span 
class="cmssi-10">directJdbcConnection</span><span 
class="cmss-10">=</span><span 
class="cmssbx-10">true</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65006r3"></a></span><span 
class="cmssi-10">org</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">eclipsescout</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">contacts</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">server</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">services</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">common</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">sql</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">DerbySqlService</span><span 
class="cmss-10">#</span><span 
class="cmssi-10">jdbcDriverName</span><span 
class="cmss-10">=</span><span 
class="cmssi-10">org</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">apache</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">derby</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">jdbc</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">EmbeddedDriver</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65007r4"></a></span><span 
class="cmssi-10">org</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">eclipsescout</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">contacts</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">server</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">services</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">common</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">sql</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">DerbySqlService</span><span 
class="cmss-10">#</span><span 
class="cmssi-10">jdbcMappingName</span><span 
class="cmss-10">=</span><span 
class="cmssi-10">jdbc</span><span 
class="cmss-10">:</span><span 
class="cmssi-10">derby</span><span 
class="cmss-10">:</span><span 
class="cmssi-10">$</span><span 
class="cmsy-10">{</span><span 
class="cmssi-10">workspace</span><span 
class="cmssi-10">_loc</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">/../</span><span 
class="cmssi-10">DB</span><span 
class="cmssi-10">_CONTACT</span><span 
class="cmss-10">;</span><span 
class="cmssi-10">create</span><span 
class="cmss-10">=</span><span 
class="cmssbx-10">true</span><span 
class="cmss-10">;</span><span 
class="cmssi-10">territory</span><span 
class="cmss-10">=</span><span 
class="cmssi-10">en</span><span 
class="cmssi-10">_US</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65008r5"></a></span><span 
class="cmssi-10">org</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">eclipsescout</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">contacts</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">server</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">services</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">common</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">sql</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">DerbySqlService</span><span 
class="cmss-10">#</span><span 
class="cmssi-10">username</span><span 
class="cmss-10">=</span><span 
class="cmssi-10">contact</span><span 
class="cmssi-10">_user</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65009r6"></a></span><span 
class="cmssi-10">org</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">eclipsescout</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">contacts</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">server</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">services</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">common</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">sql</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">DerbySqlService</span><span 
class="cmss-10">#</span><span 
class="cmssi-10">password</span><span 
class="cmss-10">=</span><span 
class="cmssi-10">secr3t</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 399--><p class="indent" >    To setup the database connection the necessary parameters need to be added to the server&#8217;s
<span class="path"><span 
class="cmtt-10">config.ini</span></span> file as shown in Listing&#x00A0;<a 
href="#x59-65002r7">5.7<!--tex4ht:ref: lst:mycontacts.server.configini.derby --></a>. Comparing the parameter names in this config file
with the package name of the created <span 
class="cmtt-10">DerbySqlService </span>service class reveals an interesting
framework feature. All Scout services can be parameterized using the <span class="path"><span 
class="cmtt-10">config.ini</span></span> file with the
pattern <span 
class="cmtt-10">&#x003C;package&#x003E;.&#x003C;class name&#x003E;#&#x003C;parameter&#x003E;=&#x003C;value&#x003E;</span>. The Scout runtime then sets the
service parameters using matching setter methods such as <span 
class="cmtt-10">setPassword </span>for the password
parameter.
<!--l. 404--><p class="indent" >    According to the parameter <span 
class="cmtt-10">jdbcMappingName=jdbc:derby:$</span><span 
class="cmsy-10">{</span><span 
class="cmtt-10">workspace</span><span 
class="cmtt-10">_loc</span><span 
class="cmsy-10">}</span><span 
class="cmtt-10">/... </span>a new Derby
database will be created in the same parent directory as the &#8221;My Contacts&#8221; workspace directory if no
database named <span 
class="cmtt-10">DB</span><span 
class="cmtt-10">_CONTACT </span>is found there. This setup is handy for development purposes but you may
want to set the database parameter to <span 
class="cmtt-10">create=false </span>in the <span class="path"><span 
class="cmtt-10">config.ini</span></span> of the production product
file.
<!--l. 407--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6501019"></a>
                                                                                 

                                                                                 

<!--l. 408--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_service_dbinstall_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_service_dbinstall_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.19: </span><span  
class="content">Add a database installation service. </span></div><!--tex4ht:label?: x59-6501019 -->
                                                                                 

                                                                                 
<!--l. 412--><p class="indent" >    </div><hr class="endfigure">
<!--l. 414--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6501120"></a>
                                                                                 

                                                                                 

<!--l. 415--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_operation_installstorage_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_operation_installstorage.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.20: </span><span  
class="content">Add the service operation to create the DB schema. </span></div><!--tex4ht:label?: x59-6501120 -->
                                                                                 

                                                                                 
<!--l. 419--><p class="indent" >    </div><hr class="endfigure">
    <!--l. 430--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 430--><p class="indent" >    <a 
 id="x59-65012r8"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-65013"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.8:
  </span><span  
class="content">The
  <span 
class="cmtt-10">installStorage</span>
  service
  operation
  to
  create
  the
  database
  schema
  for
  the
  &#8221;My
  Contacts&#8221;
  application.
  New
  tables
  are
  created
  if
  they
  are
  not
  found
  by
  <span 
class="cmtt-10">getExistingTables</span>
  in
  the
  existing
  schema.</span></div><!--tex4ht:label?: x59-65012r5.5 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65014r1"></a></span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">DBInstallService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">implements</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">IDBInstallService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65015r2"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65016r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">boolean</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_doSetup</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">true</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65017r4"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65018r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">setDoSetup</span><span 
class="cmss-10">(</span><span 
class="cmssbx-10">boolean</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">doSetup</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65019r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_doSetup</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">doSetup</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65020r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65021r8"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65022r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65023r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">installStorage</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65024r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">boolean</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">addInitialData</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">true</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65025r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_doSetup</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65026r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Set</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmssi-10">String</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">tables</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getExistingTables</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65027r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">createCompanyTable</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">tables</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">addInitialData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65028r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">createPersonTable</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">tables</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">addInitialData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65029r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">createUsersParamTable</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">tables</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">addInitialData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65030r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65031r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65032r19"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65033r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Set</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmssi-10">String</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getExistingTables</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65034r21"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Object</span><span 
class="cmss-10">[][]</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">existingTables</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">select</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">SELECT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">tablename</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">FROM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">sys</span><span 
class="cmbx-10">.</span><span 
class="cmbx-10">systables</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65035r22"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">HashSet</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmssi-10">String</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">result</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">HashSet</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmssi-10">String</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">existingTables</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">length</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65036r23"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65037r24"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">for</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Object</span><span 
class="cmss-10">[]</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">row</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">:</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">existingTables</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65038r25"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">table</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">row</span><span 
class="cmss-10">[0]</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">toUpperCase</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65039r26"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">result</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">add</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">table</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65040r27"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65041r28"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65042r29"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">result</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65043r30"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-65044r31"></a></span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
    <h4 class="subsectionHead"><span class="titlemark">5.5.1   </span> <a 
 id="x59-660005.5.1"></a>Setting up the Database Schema</h4>
<!--l. 435--><p class="noindent" >Having a working database service and a new (empty) Derby database now allows to create the necessary
database schema and populate it with some initial data. For this we add a new <span 
class="cmtt-10">DBInstallService</span>
service as shown in Figure&#x00A0;<a 
href="#x59-6501019">5.19<!--tex4ht:ref: fig:new_service_dbinstall --></a> below the <span 
class="cmti-10">Services </span>node of the Scout server. To this install service we
then add the <span 
class="cmtt-10">installStorage </span>operation according to Figure&#x00A0;<a 
href="#x59-6501120">5.20<!--tex4ht:ref: fig:new_operation_installstorage --></a>. The implementation of this method is
provided in Listing&#x00A0;<a 
href="#x59-65012r8">5.8<!--tex4ht:ref: lst:mycontacts.server.services.installdb --></a>. The method first checks if a setup is required. For this, the member variable
<span 
class="cmtt-10">m</span><span 
class="cmtt-10">_doSetup </span>is used that might also be set by the <span 
class="cmtt-10">setDoSetup </span>setter method via the server&#8217;s <span class="path"><span 
class="cmtt-10">config.ini</span></span>
file.
    <!--l. 448--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 448--><p class="indent" >    <a 
 id="x59-66001r9"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-66002"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.9:
    </span><span  
class="content">Setting
    up
    the
    <span 
class="cmtt-10">COMPANY</span>
    table
    of
    the
    &#8221;My
    Contacts&#8221;
    application.</span></div><!--tex4ht:label?: x59-66001r5.5 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66003r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">createCompanyTable</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Set</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmssi-10">String</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">tables</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">boolean</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">addInitialData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66004r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(!</span><span 
class="cmssi-10">tables</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">contains</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">COMPANY</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66005r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">insert</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">CREATE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">TABLE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">COMPANY</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66006r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">VARCHAR</span><span 
class="cmbx-10">(64)</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">NOT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">NULL</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">CONSTRAINT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">COMPANY</span><span 
class="cmbx-10">_PK</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">PRIMARY</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">KEY</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66007r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">name</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">VARCHAR</span><span 
class="cmbx-10">(64)</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66008r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">location</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">VARCHAR</span><span 
class="cmbx-10">(64)</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66009r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">url</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">VARCHAR</span><span 
class="cmbx-10">(64)</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66010r8"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66011r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">addInitialData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66012r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">insert</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">INSERT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">INTO</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">COMPANY</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">name</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">location</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">url</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66013r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">VALUES</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(:</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8217;</span><span 
class="cmbx-10">Alice</span><span 
class="cmbx-10">&#8217;&#8217;</span><span 
class="cmbx-10">s</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">Adventures</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">in</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">Wonderland</span><span 
class="cmbx-10">&#8217;,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8217;</span><span 
class="cmbx-10">London</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">England</span><span 
class="cmbx-10">&#8217;,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8217;</span><span 
class="cmbx-10">http</span><span 
class="cmbx-10">://</span><span 
class="cmbx-10">en</span><span 
class="cmbx-10">.</span><span 
class="cmbx-10">wikipedia</span><span 
class="cmbx-10">.</span><span 
class="cmbx-10">org</span><span 
class="cmbx-10">/</span><span 
class="cmbx-10">wiki</span><span 
class="cmbx-10">/</span><span 
class="cmbx-10">Alice</span><span 
class="cmbx-10">%27</span><span 
class="cmbx-10">s</span><span 
class="cmbx-10">_Adventures</span><span 
class="cmbx-10">_in</span><span 
class="cmbx-10">_Wonderland</span><span 
class="cmbx-10">&#8217;)</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66014r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">UUID</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">randomUUID</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">toString</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66015r13"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66016r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">insert</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">INSERT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">INTO</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">COMPANY</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">name</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">location</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">url</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66017r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">VALUES</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(:</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8217;</span><span 
class="cmbx-10">BSI</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">Business</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">Systems</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">Integration</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">AG</span><span 
class="cmbx-10">&#8217;,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8217;</span><span 
class="cmbx-10">Daettwil</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">Baden</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">Switzerland</span><span 
class="cmbx-10">&#8217;,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8217;</span><span 
class="cmbx-10">http</span><span 
class="cmbx-10">://</span><span 
class="cmbx-10">www</span><span 
class="cmbx-10">.</span><span 
class="cmbx-10">bsiag</span><span 
class="cmbx-10">.</span><span 
class="cmbx-10">com</span><span 
class="cmbx-10">&#8217;)</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66018r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">UUID</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">randomUUID</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">toString</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66019r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66020r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66021r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
    <!--l. 456--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 456--><p class="indent" >    <a 
 id="x59-66024r10"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-66025"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.10:
    </span><span  
class="content">Setting
    up
    the
    <span 
class="cmtt-10">PERSON</span>
    table
    of
    the
    &#8221;My
    Contacts&#8221;
    application.</span></div><!--tex4ht:label?: x59-66024r5.5 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66026r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">createPersonTable</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Set</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmssi-10">String</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">tables</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">boolean</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">addInitialData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66027r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(!</span><span 
class="cmssi-10">tables</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">contains</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">PERSON</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66028r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">insert</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">CREATE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">TABLE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">PERSON</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66029r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">person</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">VARCHAR</span><span 
class="cmbx-10">(64)</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">NOT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">NULL</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">CONSTRAINT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">PERSON</span><span 
class="cmbx-10">_PK</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">PRIMARY</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">KEY</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66030r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">VARCHAR</span><span 
class="cmbx-10">(64)</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66031r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">first</span><span 
class="cmbx-10">_name</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">VARCHAR</span><span 
class="cmbx-10">(64)</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66032r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">last</span><span 
class="cmbx-10">_name</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">VARCHAR</span><span 
class="cmbx-10">(64)</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66033r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">headline</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">VARCHAR</span><span 
class="cmbx-10">(512)</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66034r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">location</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">VARCHAR</span><span 
class="cmbx-10">(512)</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66035r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">date</span><span 
class="cmbx-10">_of</span><span 
class="cmbx-10">_birth</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">DATE</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66036r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">picture</span><span 
class="cmbx-10">_url</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">VARCHAR</span><span 
class="cmbx-10">(512)</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66037r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">CONSTRAINT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">COMPANY</span><span 
class="cmbx-10">_FK</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">FOREIGN</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">KEY</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">REFERENCES</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">COMPANY</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66038r13"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66039r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">addInitialData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66040r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">insert</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">INSERT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">INTO</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">PERSON</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">person</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">first</span><span 
class="cmbx-10">_name</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">headline</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">location</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">picture</span><span 
class="cmbx-10">_url</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">date</span><span 
class="cmbx-10">_of</span><span 
class="cmbx-10">_birth</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66041r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">VALUES</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(:</span><span 
class="cmbx-10">person</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8217;</span><span 
class="cmbx-10">Alice</span><span 
class="cmbx-10">&#8217;,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8217;</span><span 
class="cmbx-10">The</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">curious</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">girl</span><span 
class="cmbx-10">&#8217;,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8217;</span><span 
class="cmbx-10">Daresbury</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">Cheshire</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">England</span><span 
class="cmbx-10">&#8217;,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66042r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">SELECT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">FROM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">COMPANY</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">WHERE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">name</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8217;</span><span 
class="cmbx-10">Alice</span><span 
class="cmbx-10">&#8217;&#8217;</span><span 
class="cmbx-10">s</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">Adventures</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">in</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">Wonderland</span><span 
class="cmbx-10">&#8217;)</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8217;</span><span 
class="cmbx-10">http</span><span 
class="cmbx-10">://</span><span 
class="cmbx-10">www</span><span 
class="cmbx-10">.</span><span 
class="cmbx-10">uergsel</span><span 
class="cmbx-10">.</span><span 
class="cmbx-10">de</span><span 
class="cmbx-10">/</span><span 
class="cmbx-10">uploads</span><span 
class="cmbx-10">/</span><span 
class="cmbx-10">Alice</span><span 
class="cmbx-10">.</span><span 
class="cmbx-10">png</span><span 
class="cmbx-10">&#8217;,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">dob</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66043r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">person</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">UUID</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">randomUUID</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">toString</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66044r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">dob</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">DateUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">parse</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">26.11.1865</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">dd</span><span 
class="cmbx-10">.</span><span 
class="cmbx-10">mm</span><span 
class="cmbx-10">.</span><span 
class="cmbx-10">yyyy</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66045r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66046r21"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66047r22"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
    <!--l. 464--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 464--><p class="indent" >    <a 
 id="x59-66050r11"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-66051"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.11:
    </span><span  
class="content">Setting
    up
    the
    <span 
class="cmtt-10">USERS</span><span 
class="cmtt-10">_PARAM</span>
    table
    of
    the
    &#8221;My
    Contacts&#8221;
    application.</span></div><!--tex4ht:label?: x59-66050r5.5 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66052r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">createUsersParamTable</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Set</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmssi-10">String</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">tables</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">boolean</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">addInitialData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66053r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(!</span><span 
class="cmssi-10">tables</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">contains</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">USERS</span><span 
class="cmbx-10">_PARAM</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66054r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">insert</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">CREATE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">TABLE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">USERS</span><span 
class="cmbx-10">_PARAM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66055r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">VARCHAR</span><span 
class="cmbx-10">(32)</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">NOT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">NULL</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66056r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">VARCHAR</span><span 
class="cmbx-10">(32)</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">NOT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">NULL</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66057r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">value</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">VARCHAR</span><span 
class="cmbx-10">(512)</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66058r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">CONSTRAINT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">PARAM</span><span 
class="cmbx-10">_PK</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">PRIMARY</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">KEY</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66059r8"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66060r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">addInitialData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66061r10"></a></span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">//</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">nop</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66062r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66063r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66064r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 466--><p class="indent" >    Setting up the schema to contain the individual tables for the &#8221;My Contacts&#8221; application is
implemented in a separate method per table. The table definition for the company table is provided in
Listing&#x00A0;<a 
href="#x59-66001r9">5.9<!--tex4ht:ref: lst:mycontacts.server.services.installdb.company --></a>. In this method two Scout aspects are of interest.
<!--l. 470--><p class="indent" >    The first Scout feature used is the absence of a <span 
class="cmtt-10">COMMIT </span>statement after the two <span 
class="cmtt-10">INSERT INTO</span>
statements. This is possible, as all Scout service calls run in a transaction context that is transparent to
the Scout developer. If a service method exits without errors, the enclosing transaction is committed. And
if any runtime exception occurs in a service call the Scout runtime framework performs a
rollback.
<!--l. 475--><p class="indent" >    The second feature is the parameter binding used in the <span 
class="cmtt-10">INSERT INTO </span>statements. When SQL
statements are executed using any of the static <span 
class="cmtt-10">SQL </span>methods, an internal statement processor replaces all
bind variables found in the provided statement string. In Scout, SQL bind variables need to use the
pattern <span 
class="cmtt-10">:&#x003C;variable name&#x003E;</span>. The values for the bind variables can then be provided in the form of
additional arguments. In the concrete example of Listing&#x00A0;<a 
href="#x59-66001r9">5.9<!--tex4ht:ref: lst:mycontacts.server.services.installdb.company --></a>, the content for the bind variable
<span 
class="cmtt-10">:company</span><span 
class="cmtt-10">_id </span>is provided as a <span 
class="cmtt-10">NVPair </span>object. <span 
class="cmti-10">NVPair</span>s are the simplest possible form to represent bind
variables. The first constructor argument is the variable name of the bind variable, in this case
<span 
class="cmtt-10">company</span><span 
class="cmtt-10">_id</span>. The actual content of the bind variable is provided in the form of an object. Here,
the Java runtime class <span 
class="cmtt-10">UUID.randomUUID().toString() </span>is used to create a new company
key.
<!--l. 485--><p class="indent" >    Setting up the person table and the user parameter table is defined according to Listing&#x00A0;<a 
href="#x59-66024r10">5.10<!--tex4ht:ref: lst:mycontacts.server.services.installdb.person --></a> and
Listing&#x00A0;<a 
href="#x59-66050r11">5.11<!--tex4ht:ref: lst:mycontacts.server.services.installdb.users_param --></a>. To create a data object for the persons day of birth, the Scout utility class <span 
class="cmtt-10">DateUtility </span>is
used.
    <!--l. 495--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 495--><p class="indent" >    <a 
 id="x59-66065r12"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-66066"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.12:
  </span><span  
class="content">Scheduling
  the
  database
  installation
  in
  the
  <span 
class="cmtt-10">start</span>
  method
  of
  the
  <span 
class="cmtt-10">ServerApplication</span>
  class
  during
  the
  server
  application
  startup.</span></div><!--tex4ht:label?: x59-66065r5.5 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66067r1"></a></span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-66068"></a><span 
class="cmssi-10">ServerApplication</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">implements</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">IApplication</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66069r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">static</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">IScoutLogger</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">logger</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ScoutLogManager</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getLogger</span><span 
class="cmss-10">(</span><a 
 id="dx59-66070"></a><span 
class="cmssi-10">ServerApplication</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66071r3"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66072r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66073r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Object</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">start</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">IApplicationContext</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">context</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Exception</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><a 
 id="dx59-66074"></a><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66075r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ServerSession</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">serverSession</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SERVICES</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getService</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">IServerSessionRegistryService</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">)</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">newServerSession</span><span 
class="cmss-10">(</span><a 
 id="dx59-66076"></a><span 
class="cmssi-10">ServerSession</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Activator</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getDefault</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getBackendSubject</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66077r7"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66078r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ServerJob</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">installJob</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ServerJob</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">Install</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">contacts</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">DB</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">schema</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">serverSession</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66079r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66080r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">IStatus</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">runTransaction</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">IProgressMonitor</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">monitor</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66081r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">try</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66082r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SERVICES</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getService</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">IDBInstallService</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">)</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">installStorage</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66083r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">logger</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">info</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">Contacts</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">DB</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">schema</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">successfully</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">created</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66084r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66085r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">catch</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Throwable</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">t</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66086r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Status</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">IStatus</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">ERROR</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Activator</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">PLUGIN</span><span 
class="cmssi-10">_ID</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">Error</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">while</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">installing</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">contacts</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">DB</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">schema</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">t</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66087r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66088r18"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66089r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Status</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">OK</span><span 
class="cmssi-10">_STATUS</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66090r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66091r21"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66092r22"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">installJob</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">schedule</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66093r23"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">installJob</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">join</span><span 
class="cmss-10">(20000)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66094r24"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66095r25"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">logger</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">info</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">Contacts</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">server</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">application</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">started</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66096r26"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">EXIT</span><span 
class="cmssi-10">_OK</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66097r27"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-66098r28"></a></span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 497--><p class="indent" >    The only piece missing to setup the database is calling the <span 
class="cmtt-10">installStorage </span>operation during the
startup of the &#8221;My Contacts&#8221; server application. The proper way to implement such a scenario is to
schedule an installation job in the <span 
class="cmtt-10">ServerApplication </span>class of the Scout server. In the &#8221;My Contacts&#8221;
application this is implemented according to Listing&#x00A0;<a 
href="#x59-66065r12">5.12<!--tex4ht:ref: lst:mycontacts.server.serverapplication --></a>. To create a server job, a new server session
object needs to be obtained first. However, during the startup time of the server we do not have any
logged in users yet. That is why the session is created for the backend subject representing the
server application. Using this <span 
class="cmtt-10">serverSession </span>object, the <span 
class="cmtt-10">installJob </span>can be created. In it&#8217;s
<span 
class="cmtt-10">runTransaction </span>method we can then call the <span 
class="cmtt-10">installStorage </span>operation to setup the &#8221;My Contacts&#8221;
database.
    <h4 class="subsectionHead"><span class="titlemark">5.5.2   </span> <a 
 id="x59-670005.5.2"></a>Scout Logging</h4>
    <!--l. 516--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 516--><p class="indent" >    <a 
 id="x59-67001r13"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-67002"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.13:
  </span><span  
class="content">The
  logging
  configuration
  in
  the
  Scout
  server&#8217;s
  <span 
class="cmtt-10">config.ini</span>
  file.</span></div><!--tex4ht:label?: x59-67001r5.5 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-67003r1"></a></span><span 
class="cmssi-10">eclipse</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">consoleLog</span><span 
class="cmss-10">=</span><span 
class="cmssbx-10">true</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-67004r2"></a></span><span 
class="cmssi-10">org</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">eclipse</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">scout</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">log</span><span 
class="cmss-10">=</span><span 
class="cmssi-10">eclipse</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-67005r3"></a></span><span 
class="cmssi-10">org</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">eclipse</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">scout</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">log</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">level</span><span 
class="cmss-10">=</span><span 
class="cmssi-10">INFO</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 518--><p class="indent" >    An additional Scout topic that is touched in this <span 
class="cmtt-10">ServerApplication </span>class is the Scout logging. As
shown in Listing&#x00A0;<a 
href="#x59-66065r12">5.12<!--tex4ht:ref: lst:mycontacts.server.serverapplication --></a>, a static <span 
class="cmtt-10">logger </span>object is created using Scout&#8217;s <span 
class="cmtt-10">ScoutLogManager </span>class. Events can
then be logged with the <span 
class="cmtt-10">logger.info </span>method where <span 
class="cmtt-10">info </span>refers to the log level attached to
this message. Similar to the database setup described above, the logging setup is defined in
the <span class="path"><span 
class="cmtt-10">config.ini</span></span> file. The default setup defined for the development product is provided in
Listing&#x00A0;<a 
href="#x59-67001r13">5.13<!--tex4ht:ref: lst:mycontacts.server.configini.logging --></a>. Further information regarding logging in Eclipse Scout is available in the Scout
wiki<span class="footnote-mark"><a 
href="scout_intro71.html#fn12x7"><sup class="textsuperscript">12</sup></a></span><a 
 id="x59-67008f12"></a> .
    <h3 class="sectionHead"><span class="titlemark">5.6   </span> <a 
 id="x59-680005.6"></a>Fetching Data from the Database</h3>
<!--l. 530--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6800121"></a>
                                                                                 

                                                                                 

<!--l. 531--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_service_persontabledata_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_service_persontabledata.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.21: </span><span  
class="content">Add the service operation to fetch the data for the person table. </span></div><!--tex4ht:label?: x59-6800121 -->
                                                                                 

                                                                                 
<!--l. 535--><p class="noindent" ></div><hr class="endfigure">
<!--l. 537--><p class="indent" >    In the section before we have implemented and configured the SQL service to access the Derby
database from the Scout server. And during the first server startup, the application&#8217;s database schema is
created and populated with some initial data.
<!--l. 540--><p class="indent" >    Now, this SQL service is ready to be used to fetch the data for the client application&#8217;s person page
and the company page. The best place to implement these data provider methods is in the server&#8217;s
<span 
class="cmtt-10">StandardOutlineService </span>class. This class has been created by the Scout SDK during the initial project
creation step. It is meant to hold the operations that fetch the data for populating the elements visible in
the outline tree and outline pages.
<!--l. 545--><p class="indent" >    For the &#8221;My Contacts&#8221; application, we first create the <span 
class="cmtt-10">getPersonTableData </span>operation as shown in
Figure&#x00A0;<a 
href="#x59-6800121">5.21<!--tex4ht:ref: fig:new_service_persontabledata --></a>. In the wizard dialog enter &#8221;getPersonTableData&#8221; into the <span 
class="cmti-10">Operation Name </span>field. For the
return type we simply use a two dimensional object array. As the person page is also displayed
under the company page, we need to have a way to only return the persons working for a
specific company. To allow for this use case, we add the parameter &#8221;companyId&#8221; as the first
argument to the <span 
class="cmtt-10">getPersonTableData </span>operation before we close the wizard with <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span></span>
button.
<!--l. 551--><p class="indent" >    The next operation we need is the <span 
class="cmtt-10">getCompanyTableData </span>method. You may use the same creation
steps as described above for the person table page data. But for fetching company table data we do not
need an additional argument. The company page in the &#8221;My Contacts&#8221; application will always show all
available companies.
    <!--l. 564--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 564--><p class="indent" >    <a 
 id="x59-68002r14"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-68003"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.14:
  </span><span  
class="content">Fetching
  the
  table
  data
  for
  the
  person
  and
  the
  company
  page
  of
  the
  &#8221;My
  Contacts&#8221;
  application.
  The
  list
  of
  persons
  is
  restricted
  to
  employees
  of
  a
  specific
  company
  if
  a
  company
  id
  parameter
  is
  provided.</span></div><!--tex4ht:label?: x59-68002r5.6 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68004r1"></a></span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-68005"></a><span 
class="cmssi-10">StandardOutlineService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">implements</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">IStandardOutlineService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68006r2"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68007r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68008r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Object</span><span 
class="cmss-10">[][]</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getPersonTableData</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">companyId</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68009r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">stmt</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">SELECT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">person</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">first</span><span 
class="cmbx-10">_name</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">last</span><span 
class="cmbx-10">_name</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">headline</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">FROM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">PERSON</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68010r6"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68011r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><a 
 id="dx59-68012"></a><span 
class="cmssi-10">StringUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">isNullOrEmpty</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">companyId</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68013r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-68014"></a><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">select</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">stmt</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68015r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68016r10"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68017r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-68018"></a><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">select</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">stmt</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">WHERE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">companyId</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68019r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-68020"></a><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">companyId</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">companyId</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68021r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68022r14"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68023r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68024r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Object</span><span 
class="cmss-10">[][]</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getCompanyTableData</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68025r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-68026"></a><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">select</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">SELECT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">name</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">location</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">FROM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">COMPANY</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68027r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68028r19"></a></span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 566--><p class="indent" >    For the actual implementation of the two data fetching operations the code provided in
Listing&#x00A0;<a 
href="#x59-68002r14">5.14<!--tex4ht:ref: lst:mycontacts.server.services.standardoutline --></a> is used. The implementation is straight forward and almost trivial. However,
we can use the <span 
class="cmtt-10">getPersonTableData </span>example to introduce one of the many Scout utility
classes.
<!--l. 570--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6802922"></a>
                                                                                 

                                                                                 

<!--l. 571--><p class="noindent" ><img 
src="OneDayTutorial/figures/scout_utility_classes.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.22: </span><span  
class="content">Accessing the Scout utility classes with the pattern <span 
class="cmtt-10">org.eclipse.scout.*Utility</span>.</span></div><!--tex4ht:label?: x59-6802922 -->
                                                                                 

                                                                                 
<!--l. 574--><p class="indent" >    </div><hr class="endfigure">
<!--l. 576--><p class="indent" >    The class <span 
class="cmtt-10">StringUtility </span>is one of the many utility classes provided by the Scout framework. Here,
it is used for the typical null or empty check. To get a quick overview, hit the <span 
class="cmmi-10">&#x003C;</span><span 
class="cmcsc-10">C<span 
class="small-caps">t</span><span 
class="small-caps">r</span><span 
class="small-caps">l</span></span><span 
class="cmmi-10">&#x003E;&#x003C;</span><span 
class="cmcsc-10">S<span 
class="small-caps">h</span><span 
class="small-caps">i</span><span 
class="small-caps">f</span><span 
class="small-caps">t</span></span><span 
class="cmmi-10">&#x003E;&#x003C;</span><span 
class="cmcsc-10">T</span><span 
class="cmmi-10">&#x003E;</span>
key combination. In the type dialog that appears enter <span 
class="cmtt-10">org.eclipse.scout.*Utility </span>into
the pattern field. This will display the complete list of the Scout utility classes as shown in
Figure&#x00A0;<a 
href="#x59-6802922">5.22<!--tex4ht:ref: fig:scout_utility_classes --></a>.
<!--l. 582--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6803023"></a>
                                                                                 

                                                                                 

<!--l. 583--><p class="noindent" ><img 
src="OneDayTutorial/figures/implement_execloadtabledata_explorer.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/implement_execloadtabledata_properties.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.23: </span><span  
class="content">Adding method <span 
class="cmtt-10">execLoadTableData </span>to the person table page.</span></div><!--tex4ht:label?: x59-6803023 -->
                                                                                 

                                                                                 
<!--l. 587--><p class="indent" >    </div><hr class="endfigure">
    <!--l. 596--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 596--><p class="indent" >    <a 
 id="x59-68031r15"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-68032"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.15:
    </span><span  
class="content">Loading
    the
    person
    data
    into
    the
    person
    table
    page.</span></div><!--tex4ht:label?: x59-68031r5.6 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68033r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68034r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Object</span><span 
class="cmss-10">[][]</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-68035"></a><span 
class="cmssi-10">execLoadTableData</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">SearchFilter</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">filter</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68036r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SERVICES</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getService</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">IStandardOutlineService</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">)</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getPersonTableData</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">getCompanyId</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-68037r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 598--><p class="indent" >    As we have implemented the server service methods to load person and company data from the
database, we can now use these services to load the data into the client. For this, we first navigate to the
<span 
class="cmtt-10">PersonTablePage </span>under the orange client node in the Scout SDK. In the corresponding Scout Object
Properties we add method <span 
class="cmtt-10">execLoadTableData </span>by clicking on the green plus icon as shown in
Figure&#x00A0;<a 
href="#x59-6803023">5.23<!--tex4ht:ref: fig:implement_execloadtabledata --></a>. Fetching the actual data is now implemented in a single line of code according to
Listing&#x00A0;<a 
href="#x59-68031r15">5.15<!--tex4ht:ref: lst:mycontacts.client.pages.loadpersontabledata --></a>.
<!--l. 603--><p class="indent" >    For the company table page, the process described above can be repeated. The only difference is the
implementation of the method <span 
class="cmtt-10">execLoadTableData</span>. Here, we can use the server service method
<span 
class="cmtt-10">getCompanyTableData() </span>to fetch the company data from the server.
    <h3 class="sectionHead"><span class="titlemark">5.7   </span> <a 
 id="x59-690005.7"></a>Creating the Person Form</h3>
<!--l. 612--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6900124"></a>
                                                                                 

                                                                                 

<!--l. 613--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_form_person_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_form_person.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.24: </span><span  
class="content">Add the person form.</span></div><!--tex4ht:label?: x59-6900124 -->
                                                                                 

                                                                                 
<!--l. 617--><p class="noindent" ></div><hr class="endfigure">
<!--l. 619--><p class="indent" >    In this section we will create the person form that is used to display and edit the persons stored in
the &#8221;My Contacts&#8221; application. To add the person form use the Scout SDK <span 
class="cmti-10">New Form </span>wizard as shown
in Figure&#x00A0;<a 
href="#x59-6900124">5.24<!--tex4ht:ref: fig:new_form_person --></a>. In the first wizard step you just need to enter &#8221;Person&#8221; as a new translated text into the
<span 
class="cmti-10">Name </span>field and add &#8221;ui.forms&#8221; as the sub-package name in the corresponding wizard field. Then click the
<span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> </span>button.
<!--l. 624--><p class="indent" >    The wizard will create the necessary artefacts in the application&#8217;s client, the shared and the server
plugin projects. On the client side the <span 
class="cmtt-10">PersonForm </span>class with the necessary form handlers is
created, in the shared part, the <span 
class="cmtt-10">PersonFormData </span>transfer object is added. On the server side, a
<span 
class="cmtt-10">PersonProcessService </span>with all necessary service operations referenced by the form handlers is
implemented.
<!--l. 628--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-6900225"></a>
                                                                                 

                                                                                 

<!--l. 629--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_bean_personid_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_bean_personid.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.25: </span><span  
class="content">Add the <span 
class="cmti-10">PersonId </span>variable to the person form.</span></div><!--tex4ht:label?: x59-6900225 -->
                                                                                 

                                                                                 
<!--l. 633--><p class="indent" >    </div><hr class="endfigure">
<!--l. 635--><p class="indent" >    To hold the persons primary key in the person form we also need to add a corresponding variable.
For this, use the <span 
class="cmti-10">New Property Bean </span>wizard as shown in Figure&#x00A0;<a 
href="#x59-6900225">5.25<!--tex4ht:ref: fig:new_bean_personid --></a>. In the wizard dialog, enter
&#8221;PersonId&#8221; into the <span 
class="cmti-10">Name </span>field and pick <span 
class="cmtt-10">String </span>from the dropdown list provided in the <span 
class="cmti-10">Bean type </span>field.
Then, click the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> </span>button to close the wizard.
    <h4 class="subsectionHead"><span class="titlemark">5.7.1   </span> <a 
 id="x59-700005.7.1"></a>Creating the Form Layout with From Fields</h4>
<!--l. 643--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7000126"></a>
                                                                                 

                                                                                 

<!--l. 644--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_field_personbox.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_field_personbox_name.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.26: </span><span  
class="content">Add the first group box field to the person form.</span></div><!--tex4ht:label?: x59-7000126 -->
                                                                                 

                                                                                 
<!--l. 648--><p class="noindent" ></div><hr class="endfigure">
<!--l. 650--><p class="indent" >    As a next step we create the main layout structure of the person form. According to
the screenshot of the person form shown in Figure&#x00A0;<a 
href="#x59-610031">5.1<!--tex4ht:ref: fig:my_contacts_swt --></a> the form is organized into an upper
box including the first name, the last name and a picture field. In the &#8221;Details&#8221; box in the
lower half of the form some additional fields are found, such as the date of birth field. And
the bottom of the form holds a &#8221;Show Map ...&#8221; link. We start with the general layout by
adding the <span 
class="cmtt-10">PersonBox </span>according to Figure&#x00A0;<a 
href="#x59-7000126">5.26<!--tex4ht:ref: fig:new_field_personbox --></a>. In the first step (omitted in Figure&#x00A0;<a 
href="#x59-7000126">5.26<!--tex4ht:ref: fig:new_field_personbox --></a>)
of the new form field wizard the field type <span 
class="cmtt-10">GroupBox </span>has to be selected. Below the person
box we add the detail group box. As before, we select the <span 
class="cmtt-10">GroupBox </span>field type and click on
the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button. In the second wizard step we then enter the text &#8221;Detail&#8221; into the <span 
class="cmti-10">Name</span>
field.
<!--l. 660--><p class="indent" >    We now add the form fields listed below using the the <span 
class="cmti-10">New Form Field </span>wizard multiple times. Most
fields are of type <span 
class="cmtt-10">StringField </span>and different field types are separately indicated.
     <ul class="itemize1">
     <li class="itemize">PersonBox
         <ul class="itemize2">
         <li class="itemize">&#8221;First Name&#8221;
         </li>
         <li class="itemize">&#8221;Last Name&#8221;
         </li>
         <li class="itemize">&#8221;Picture URL&#8221;
         </li>
         <li class="itemize">PictureField (ImageField)</li></ul>
     </li>
     <li class="itemize">&#8221;Detail&#8221; DetailBox
         <ul class="itemize2">
         <li class="itemize">&#8221;Headline&#8221;
         </li>
         <li class="itemize">&#8221;Location&#8221;
         </li>
         <li class="itemize">&#8221;Date of Birth&#8221; (DateField)</li></ul>
     </li></ul>
<!--l. 679--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7000227"></a>
                                                                                 

                                                                                 

<!--l. 680--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_field_picture_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_field_picture.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.27: </span><span  
class="content">Add the picture field to the first group box of the person form.</span></div><!--tex4ht:label?: x59-7000227 -->
                                                                                 

                                                                                 
<!--l. 684--><p class="indent" >    </div><hr class="endfigure">
<!--l. 686--><p class="indent" >    As an example for adding the form fields, the process is illustrated in Figure&#x00A0;<a 
href="#x59-7000227">5.27<!--tex4ht:ref: fig:new_field_picture --></a> for the creation of
the picture field. In the field list we need to set non default properties for the <span 
class="cmti-10">PictureUrlField </span>field and
the <span 
class="cmti-10">PictureField </span>field. The picture URL field will hold an URL pointing to the picture of the
person to be displayed. As in the person form only the picture is to be displayed but not
the picture URL, we need to make this field invisible. For this, select the <span 
class="cmti-10">PictureUrlField</span>
node in the Scout Explorer and then untick the <span 
class="cmti-10">Visible </span>field in the Scout Object Properties.
Note that to access the visibility property you need to open the section <span 
class="cmti-10">Advanced Properties</span>
first.
<!--l. 693--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7000328"></a>
                                                                                 

                                                                                 

<!--l. 694--><p class="noindent" ><img 
src="OneDayTutorial/figures/picture_field_properties_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/picture_field_properties_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.28: </span><span  
class="content">Set the properties for the picture field of the person form.</span></div><!--tex4ht:label?: x59-7000328 -->
                                                                                 

                                                                                 
<!--l. 698--><p class="indent" >    </div><hr class="endfigure">
<!--l. 700--><p class="indent" >    As the configuration of the picture field is more complex than the other fields, the changed
properties are shown in the screenshots provided in Figure&#x00A0;<a 
href="#x59-7000328">5.28<!--tex4ht:ref: fig:picture_field_properties --></a>. First, no label is shown for the
picture field as shown in the unticked <span 
class="cmti-10">Label Visible </span>field of the Scout Object Properties. Then,
property <span 
class="cmti-10">Grid H </span>is set to 5. This results in the picture to cover the vertical space of 5 form
fields.
    <!--l. 712--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 712--><p class="indent" >    <a 
 id="x59-70004r16"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-70005"></a>

     <div class="caption" 
><span class="id">Listing&#x00A0;5.16:
     </span><span  
class="content">The
     behaviour
     of
     the
     person
     form&#8217;s
     <span 
class="cmtt-10">PictureField</span>
     is
     triggered
     by
     changes
     in
     field
     <span 
class="cmtt-10">PictureUrlField</span>.</span></div><!--tex4ht:label?: x59-70004r5.7 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70006r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(40.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70007r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PictureField</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractImageField</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70008r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70009r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Class</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">?</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">IValueField</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-70010"></a><span 
class="cmssi-10">getConfiguredMasterField</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70011r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonForm</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">MainBox</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">PersonBox</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">PictureURLField</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70012r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70013r7"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70014r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70015r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-70016"></a><span 
class="cmssi-10">execChangedMasterValue</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Object</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">newMasterValue</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70017r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">try</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70018r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">URL</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">url</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">URL</span><span 
class="cmss-10">((</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">newMasterValue</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70019r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">setImage</span><span 
class="cmss-10">(</span><a 
 id="dx59-70020"></a><span 
class="cmssi-10">IOUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getContent</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">url</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">openStream</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70021r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">setAutoFit</span><span 
class="cmss-10">(</span><span 
class="cmssbx-10">true</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70022r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70023r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">catch</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Exception</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">e</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70024r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">e</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">printStackTrace</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70025r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70026r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70027r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-70028r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 714--><p class="indent" >    Finally, we want the picture to be refreshed whenever the content of the picture URL is changed. For
this, the property <span 
class="cmti-10">Master Field </span>is set to the <span 
class="cmtt-10">PictureUrlField</span>. The implementation of the
corresponding method <span 
class="cmtt-10">execChangedMasterValue </span>is provided in Listing&#x00A0;<a 
href="#x59-70004r16">5.16<!--tex4ht:ref: lst:mycontacts.client.forms.person.picturefield --></a>. As we can see, the
Scout helper class <span 
class="cmtt-10">IOUtility </span>is used to read the image content from the provided URL. This
content is then used to assign the image content with the image field&#8217;s method <span 
class="cmtt-10">setImage</span>.
Method <span 
class="cmtt-10">setAutoFit </span>is called to adapt the picture to the dimensions available to the image
field.
    <h4 class="subsectionHead"><span class="titlemark">5.7.2   </span> <a 
 id="x59-710005.7.2"></a>A simple Form to edit the Picture URL</h4>
<!--l. 724--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7100129"></a>
                                                                                 

                                                                                 

<!--l. 725--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_form_url_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_form_url_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.29: </span><span  
class="content">Add the URL editor form. This form does not need any connections to the server.
Therefore, the related components such as services and the form data can be removed in the second
wizard step shown on the right side.</span></div><!--tex4ht:label?: x59-7100129 -->
                                                                                 

                                                                                 
<!--l. 729--><p class="noindent" ></div><hr class="endfigure">
<!--l. 731--><p class="indent" >    To edit a person&#8217;s picture link, we create a simple URL editor form as shown in Figure&#x00A0;<a 
href="#x59-7100129">5.29<!--tex4ht:ref: fig:new_form_url --></a>. As we
only need this form to update the URL information of a person&#8217;s picture field, we do not need
any connectivity to the backend of the &#8221;My Contacts&#8221; application. That is why almost all
form and service artefacts are deselected in the second wizard step shown on the right side of
Figure&#x00A0;<a 
href="#x59-7100129">5.29<!--tex4ht:ref: fig:new_form_url --></a>.
    <!--l. 741--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 741--><p class="indent" >    <a 
 id="x59-71002r17"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-71003"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.17:
  </span><span  
class="content">The
  UI
  structure
  of
  the
  <span 
class="cmtt-10">PictureURLForm</span>
  used
  to
  update
  the
  URL
  of
  the
  picture
  field
  in
  the
  person
  form.</span></div><!--tex4ht:label?: x59-71002r5.7 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71004r1"></a></span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PictureURLForm</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractForm</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71005r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(10.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71006r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">MainBox</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractGroupBox</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71007r4"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71008r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(10.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71009r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">URLBox</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractGroupBox</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71010r7"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71011r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(10.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71012r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PictureURLField</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractStringField</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71013r10"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71014r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71015r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredLabel</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71016r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">TEXTS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">PictureURL</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71017r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71018r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71019r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71020r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71021r18"></a></span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 743--><p class="indent" >    As this form only holds a single URL field, we omit the description of the creation of the URL editor
form&#8217;s content and provide the resulting Java code instead. In Listing&#x00A0;<a 
href="#x59-71002r17">5.17<!--tex4ht:ref: lst:mycontacts.client.forms.pictureurl --></a> just the form&#8217;s <span 
class="cmtt-10">MainBox </span>code
is shown.
<!--l. 746--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7102230"></a>
                                                                                 

                                                                                 

<!--l. 747--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_menu_editurl_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_menu_editurl.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.30: </span><span  
class="content">Add the URL edit menu to the picture field.</span></div><!--tex4ht:label?: x59-7102230 -->
                                                                                 

                                                                                 
<!--l. 751--><p class="indent" >    </div><hr class="endfigure">
<!--l. 753--><p class="indent" >    This form is then started via an &#8221;Edit URL ...&#8221; contextmenu on the image field. The creation of this
contextmenu is shown in Figure&#x00A0;<a 
href="#x59-7102230">5.30<!--tex4ht:ref: fig:new_menu_editurl --></a>. See Listing&#x00A0;<a 
href="#x59-71023r18">5.18<!--tex4ht:ref: lst:mycontacts.client.forms.person.picturefield.editmenu --></a> for the actual implementation of the <span 
class="cmtt-10">execAction</span>
for this contextmenu.
    <!--l. 765--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 765--><p class="indent" >    <a 
 id="x59-71023r18"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-71024"></a>

         <div class="caption" 
><span class="id">Listing&#x00A0;5.18:
         </span><span  
class="content">The
         edit
         menu
         implemented
         in
         class
         <span 
class="cmtt-10">EditURLMenu</span>
         of
         the
         picture
         field.
         If
         the
         URL
         was
         changed
         the
         picture
         URL
         field
         of
         the
         person
         form
         is
         set
         accordingly
         in
         method
         <span 
class="cmtt-10">execAction</span></span></div><!--tex4ht:label?: x59-71023r5.7 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71025r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(10.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71026r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">EditURLMenu</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractExtensibleMenu</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71027r3"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71028r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71029r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredText</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71030r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">TEXTS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">EditURL</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71031r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71032r8"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71033r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71034r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-71035"></a><span 
class="cmssi-10">execAction</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71036r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PictureURLForm</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">form</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PictureURLForm</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71037r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">form</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">startModify</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71038r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">form</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">waitFor</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71039r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">form</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">isFormStored</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71040r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getPictureURLField</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">setValue</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">form</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getPictureURLField</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71041r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71042r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-71043r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 767--><p class="indent" >    Once the edit URL form is started with <span 
class="cmtt-10">form.startModify() </span>the client waits in method
<span 
class="cmtt-10">form.waitFor </span>until the form is closed by the user. If the user has changed any field content (the picture
URL in our case) and closed the form with the <span 
class="cmcsc-10">OK </span>button, the method <span 
class="cmtt-10">form.isFormStored </span>returns true,
and we can copy the new URL from the editor form field into the picture URL field of the person form.
Such a change will then trigger method <span 
class="cmtt-10">execChangedMasterValue </span>of the <span 
class="cmtt-10">PictureField </span>which in turn
updates the image shown in the person form.
    <h4 class="subsectionHead"><span class="titlemark">5.7.3   </span> <a 
 id="x59-720005.7.3"></a>Linking the Person Form to the Person Page</h4>
<!--l. 774--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7200131"></a>
                                                                                 

                                                                                 

<!--l. 775--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_menu_editperson_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_menu_editperson.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.31: </span><span  
class="content">Add the Person edit menu to the person page.</span></div><!--tex4ht:label?: x59-7200131 -->
                                                                                 

                                                                                 
<!--l. 779--><p class="noindent" ></div><hr class="endfigure">
    <!--l. 789--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 789--><p class="indent" >    <a 
 id="x59-72002r19"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-72003"></a>

     <div class="caption" 
><span class="id">Listing&#x00A0;5.19:
     </span><span  
class="content">The
     <span 
class="cmtt-10">EditPersonMenu</span>
     to
     edit
     the
     person
     selected
     in
     the
     person
     table.
     The
     person
     id
     taken
     from
     the
     corresponding
     (invisible)
     column
     is
     transferred
     to
     the
     person
     form
     before
     the
     form
     is
     started.</span></div><!--tex4ht:label?: x59-72002r5.7 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72004r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(10.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72005r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">EditPersonMenu</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractExtensibleMenu</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72006r3"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72007r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72008r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredText</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72009r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">TEXTS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">EditPerson</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72010r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72011r8"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72012r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72013r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">execAction</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72014r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonForm</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">form</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonForm</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72015r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">form</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">setPersonId</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">getPersonIdColumn</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getSelectedValue</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72016r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">form</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">startModify</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72017r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">form</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">waitFor</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72018r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">form</span><span 
class="cmss-10">.</span><a 
 id="dx59-72019"></a><span 
class="cmssi-10">isFormStored</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><a 
 id="dx59-72020"></a><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72021r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">reloadPage</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72022r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72023r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72024r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 791--><p class="indent" >    The user of the &#8221;My Contacts&#8221; application wants to use the person form to show/edit attributes of a
specific person. To support this use case, we need to link this form with the &#8221;My Contacts&#8221; application.
As we already have person pages that show some of the person&#8217;s attribute, we can now add
context menus to this list to open/edit existing persons in the person form and to create
new persons as well. This is achieved by using the <span 
class="cmti-10">New Menu </span>wizard on the <span 
class="cmti-10">Menus </span>node
of the table of the person page according to Figure&#x00A0;<a 
href="#x59-7200131">5.31<!--tex4ht:ref: fig:new_menu_editperson --></a>. In the <span 
class="cmti-10">Name </span>field enter the new
translated text &#8221;Edit Person ...&#8221;. The form to start is the <span 
class="cmtt-10">PersonForm </span>and the <span 
class="cmtt-10">ModifyHandler </span>is
the form handler to be used to start the form. As we have defined a meaningful primary
key column on the person page and a matching variable is available for the person form,
the Scout SDK wizard is generating the necessary code automatically. The implementation
of the <span 
class="cmtt-10">execAction </span>method provided in Listing&#x00A0;<a 
href="#x59-72002r19">5.19<!--tex4ht:ref: lst:mycontacts.desktop.outline.personpage.editmenu --></a> works out of the box and should not
need any manual tuning. Now, you may also add the &#8221;New Person ...&#8221; menu in the same
way. Except that you pick the <span 
class="cmtt-10">NewHander </span>in the <span 
class="cmti-10">New Menu </span>wizard instead of the modify
handler.
<!--l. 802--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7202732"></a>
                                                                                 

                                                                                 

<!--l. 803--><p class="noindent" ><img 
src="OneDayTutorial/figures/person_table_explorer.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/person_table_properties.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.32: </span><span  
class="content">Set the behaviour for the row level action on the person table.</span></div><!--tex4ht:label?: x59-7202732 -->
                                                                                 

                                                                                 
<!--l. 807--><p class="indent" >    </div><hr class="endfigure">
    <!--l. 816--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 816--><p class="indent" >    <a 
 id="x59-72028r20"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-72029"></a>

     <div class="caption" 
><span class="id">Listing&#x00A0;5.20:
     </span><span  
class="content">The
     <span 
class="cmtt-10">execRowAction</span>
     method
     on
     table
     pages
     is
     used
     to
     trigger
     an
     action
     when
     a
     row
     is
     selected
     with
     a
     double
     click
     or
     <span 
class="cmcsc-10">&#x003C;E<span 
class="small-caps">n</span><span 
class="small-caps">t</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span>&#x003E;</span>.</span></div><!--tex4ht:label?: x59-72028r5.7 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72030r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72031r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-72032"></a><span 
class="cmssi-10">execRowAction</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">ITableRow</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">row</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72033r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getMenu</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">EditPersonMenu</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">)</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">execAction</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-72034r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 818--><p class="indent" >    To open the person form with a double click on a person row or by hitting the <span 
class="cmmi-10">&#x003C;</span><span 
class="cmcsc-10">E<span 
class="small-caps">n</span><span 
class="small-caps">t</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span></span><span 
class="cmmi-10">&#x003E; </span>key, you
may add a corresponding <span 
class="cmtt-10">execRowAction </span>on the person page. This method can be added to the person
table by clicking on the green plus icon next to the operation <span 
class="cmti-10">Exec Row Action </span>as shown in Figure&#x00A0;<a 
href="#x59-7202732">5.32<!--tex4ht:ref: fig:person_table_properties --></a>.
For the implementation of this method you may reuse the functionality implemented for the context
menu according to Listing&#x00A0;<a 
href="#x59-72028r20">5.20<!--tex4ht:ref: lst:mycontacts.desktop.outline.personpage.execrowaction --></a>.
    <h4 class="subsectionHead"><span class="titlemark">5.7.4   </span> <a 
 id="x59-730005.7.4"></a>Adding the Company Smartfield</h4>
<!--l. 826--><p class="noindent" >At the current stage of the &#8221;My Contacts&#8221; application, we have no option to manage the relationship
between people and companies. To manage this relation, we now add a company smart field to the person
form. This smart field will then hold the current assignment of the person represented in the person
form.
<!--l. 830--><p class="indent" >    A Scout smart field can be viewed as user friendly dropdown field on steroids that also implements
<span 
class="cmti-10">search-as-you-type </span>to pick a specific entry. In the simplest case the smart field provides access to a small
and locally provided list of key value pairs. But for the intended use in the &#8221;My Contacts&#8221; application, we
will need to access a list of elements provided by the server that will be compiled dynamically at
runtime.
<!--l. 834--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7300133"></a>
                                                                                 

                                                                                 

<!--l. 835--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_lookupcall_company_contextmenu.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.33: </span><span  
class="content">Add a lookup call to the applications shared node.</span></div><!--tex4ht:label?: x59-7300133 -->
                                                                                 

                                                                                 
<!--l. 838--><p class="indent" >    </div><hr class="endfigure">
<!--l. 840--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7300234"></a>
                                                                                 

                                                                                 

<!--l. 841--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_lookupcall_company_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_lookupcall_company_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.34: </span><span  
class="content">The two wizard steps to enter the details of the company lookup call.</span></div><!--tex4ht:label?: x59-7300234 -->
                                                                                 

                                                                                 
<!--l. 845--><p class="indent" >    </div><hr class="endfigure">
<!--l. 847--><p class="indent" >    To create the access to this list, we start with the creation of the company lookup call. As shown in
Figure&#x00A0;<a 
href="#x59-7300133">5.33<!--tex4ht:ref: fig:new_lookupcall_company_contextmenu --></a> the lookup call is added on the <span 
class="cmti-10">Lookup Calls </span>folder under the green shared node of the &#8221;My
Contacts&#8221; application. This opens the <span 
class="cmti-10">New Lookup Call </span>wizard as shown in Figure&#x00A0;<a 
href="#x59-7300234">5.34<!--tex4ht:ref: fig:new_lookupcall_company --></a>. In the first
wizard step, enter &#8221;Company&#8221; into the <span 
class="cmti-10">Class Name </span>field, &#8221;services.lookup&#8221; into the <span 
class="cmti-10">Sub Package </span>field
and &#8221;String&#8221; into the <span 
class="cmti-10">Key Type </span>field. Now verify that the wizard step looks the same as the screenshot
shown on the left hand side of Figure&#x00A0;<a 
href="#x59-7300234">5.34<!--tex4ht:ref: fig:new_lookupcall_company --></a>. Before the wizard is closed, click on the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button to move
to the second wizard step. As shown on the right hand side of Figure&#x00A0;<a 
href="#x59-7300234">5.34<!--tex4ht:ref: fig:new_lookupcall_company --></a>, the wizard will
also create a corresponding <span 
class="cmtt-10">CompanyLookupService </span>on the application&#8217;s server. We can now
close this wizard with the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> </span>button and add the business logic to this company lookup
service.
    <!--l. 863--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 863--><p class="indent" >    <a 
 id="x59-73003r21"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-73004"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.21:
  </span><span  
class="content">The
  company
  lookup
  call
  with
  its
  <span 
class="cmtt-10">getConfiguredService</span>
  method
  in
  the
  application&#8217;s
  shared
  plugin.</span></div><!--tex4ht:label?: x59-73003r5.7 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73005r1"></a></span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-73006"></a><span 
class="cmssi-10">CompanyLookupCall</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-73007"></a><span 
class="cmssi-10">LookupCall</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmssi-10">String</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73008r2"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73009r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">static</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">final</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">long</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">serialVersionUID</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">1</span><span 
class="cmssi-10">L</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73010r4"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73011r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73012r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Class</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">?</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ILookupService</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmssi-10">String</span><span 
class="cmmi-10">&#x003E;&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-73013"></a><span 
class="cmssi-10">getConfiguredService</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73014r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ICompanyLookupService</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73015r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73016r9"></a></span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
    <!--l. 873--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 873--><p class="indent" >    <a 
 id="x59-73017r22"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-73018"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.22:
  </span><span  
class="content">The
  company
  lookup
  service
  in
  the
  application&#8217;s
  server
  plugin.
  The
  <span 
class="cmtt-10">key</span>
  and
  the
  <span 
class="cmtt-10">text</span>
  criteria
  are
  used
  to
  search
  for
  values
  by
  key
  or
  by
  the
  provided
  name
  substring.
  index</span></div><!--tex4ht:label?: x59-73017r5.7 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73019r1"></a></span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">CompanyLookupService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractSqlLookupService</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmssi-10">String</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">implements</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ICompanyLookupService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73020r2"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73021r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73022r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredSqlSelect</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73023r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">SELECT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73024r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73025r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">name</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73026r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">FROM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">COMPANY</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73027r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">WHERE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">1=1</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73028r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmmib-10">&#x003C;</span><span 
class="cmbx-10">key</span><span 
class="cmmib-10">&#x003E;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">AND</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">key</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmmib-10">&#x003C;</span><span 
class="cmbx-10">/</span><span 
class="cmbx-10">key</span><span 
class="cmmib-10">&#x003E;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73029r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmmib-10">&#x003C;</span><span 
class="cmbx-10">text</span><span 
class="cmmib-10">&#x003E;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">AND</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">UPPER</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">name</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">LIKE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">UPPER</span><span 
class="cmbx-10">(:</span><span 
class="cmbx-10">text</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmmib-10">&#x003C;</span><span 
class="cmbx-10">/</span><span 
class="cmbx-10">text</span><span 
class="cmmib-10">&#x003E;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73030r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmmib-10">&#x003C;</span><span 
class="cmbx-10">all</span><span 
class="cmmib-10">&#x003E;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmmib-10">&#x003C;</span><span 
class="cmbx-10">/</span><span 
class="cmbx-10">all</span><span 
class="cmmib-10">&#x003E;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73031r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73032r14"></a></span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 875--><p class="indent" >    The <span 
class="cmtt-10">CompanyLookupCall </span>just created by the Scout SDK wizard is provided in Listing&#x00A0;<a 
href="#x59-73003r21">5.21<!--tex4ht:ref: lst:mycontacts.shared.lookup.companylookupcall --></a>. As we
can see, the only method implemented is <span 
class="cmtt-10">getConfiguredService </span>that points to the specific server
service to be used. In the Scout Explorer, the new company lookup service can be found in
the <span 
class="cmti-10">Lookup Services </span>folder under the blue server node of the application. In this service, we
need to implement method <span 
class="cmtt-10">getConfiguredSqlSelect </span>as shown in Listing&#x00A0;<a 
href="#x59-73017r22">5.22<!--tex4ht:ref: lst:mycontacts.server.lookup.companylookupservice --></a>. For Scout
lookup services, specific <span 
class="cmti-10">key</span>, <span 
class="cmti-10">text </span>and <span 
class="cmti-10">all </span>criteria blocks need to be provided. This criteria
are included in the <span 
class="cmtt-10">SELECT </span>statement using the <span 
class="cmtt-10">&#x003C;key&#x003E;</span>, <span 
class="cmtt-10">&#x003C;text&#x003E; </span>and <span 
class="cmtt-10">&#x003C;all&#x003E; </span>tags as shown in
the listing. The Scout runtime uses the <span 
class="cmtt-10">&#x003C;key&#x003E;</span>-block in cases where a specific key is already
assigned to the smart field. The <span 
class="cmtt-10">&#x003C;text&#x003E;</span>-block is used as a query criteria to create the dynamic
<span 
class="cmti-10">search-as-you-type </span>hit list based on the (sub)string entered by the user so far. Finally, the
<span 
class="cmtt-10">&#x003C;all&#x003E;</span>-block is used to define the hit list to be shown when the user does not enter any text into the
smart field but clicks on the field&#8217;s search icon instead. The bind variable <span 
class="cmtt-10">:key </span>and <span 
class="cmtt-10">:text </span>are
provided by Scout and hold the value of the assigned key or the text entered into the smart
field.
<!--l. 886--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7303335"></a>
                                                                                 

                                                                                 

<!--l. 887--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_smartfield_company_contextmenu.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.35: </span><span  
class="content">Add a smart field to the person form.</span></div><!--tex4ht:label?: x59-7303335 -->
                                                                                 

                                                                                 
<!--l. 890--><p class="indent" >    </div><hr class="endfigure">
<!--l. 892--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7303436"></a>
                                                                                 

                                                                                 

<!--l. 893--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_smartfield_company_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_smartfield_company_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.36: </span><span  
class="content">Create the company smart field for the person form. In the second wizard step shown
on the right side, first remove the content in the <span 
class="cmti-10">Generic Type </span>field and then select the company
lookup call into the corresponding field.</span></div><!--tex4ht:label?: x59-7303436 -->
                                                                                 

                                                                                 
<!--l. 897--><p class="indent" >    </div><hr class="endfigure">
<!--l. 899--><p class="indent" >    We are now ready to add the company smart field to the person form. To start the <span 
class="cmti-10">New Form Field</span>
wizard we use the context menu on the <span 
class="cmtt-10">DetailBox </span>of the person form as shown in Figure&#x00A0;<a 
href="#x59-7303436">5.36<!--tex4ht:ref: fig:new_smartfield_company --></a>. In the
first wizard step, we chose the <span 
class="cmti-10">SmartField </span>entry as the field type and click the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button. Then, we
enter &#8221;Company&#8221; into the <span 
class="cmti-10">Name </span>field as shown on the right hand side of Figure&#x00A0;<a 
href="#x59-7303436">5.36<!--tex4ht:ref: fig:new_smartfield_company --></a>. Make sure that you
select the <span 
class="cmti-10">String </span>entry in the <span 
class="cmti-10">Generic Type </span>field as we are using string values to identify companies in the
&#8221;My Contacts&#8221; application. And in the <span 
class="cmti-10">LookupCall </span>field, we can now select the <span 
class="cmti-10">CompanyLookupCall </span>that
we have just created before. Finally, the position of the new company smart field can be
set in the <span 
class="cmti-10">Sibling </span>field before the location field before the wizard is closed with the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span></span>
button.
    <!--l. 914--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 914--><p class="indent" >    <a 
 id="x59-73035r23"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-73036"></a>

     <div class="caption" 
><span class="id">Listing&#x00A0;5.23:
     </span><span  
class="content">The
     smart
     field
     <span 
class="cmtt-10">CompanyField</span>
     of
     the
     person
     form
     and
     its
     wiring
     with
     the
     company
     lookup
     call.</span></div><!--tex4ht:label?: x59-73035r5.7 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73037r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(40.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73038r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">CompanyField</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-73039"></a><span 
class="cmssi-10">AbstractSmartField</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmssi-10">String</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73040r3"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73041r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73042r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredLabel</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73043r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">TEXTS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">Company</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73044r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73045r8"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73046r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73047r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Class</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">?</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ILookupCall</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmssi-10">String</span><span 
class="cmmi-10">&#x003E;&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-73048"></a><span 
class="cmssi-10">getConfiguredLookupCall</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73049r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">CompanyLookupCall</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73050r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73051r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-73052r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 916--><p class="indent" >    The implementation of the company smart field created by the Scout SDK wizard is provided in
Listing&#x00A0;<a 
href="#x59-73035r23">5.23<!--tex4ht:ref: lst:mycontacts.client.forms.person.companyfield --></a>. A look at the implementation of the <span 
class="cmtt-10">CompanyField </span>class shows the wiring with the
company lookup service.
    <h4 class="subsectionHead"><span class="titlemark">5.7.5   </span> <a 
 id="x59-740005.7.5"></a>Adding the Map Form</h4>
<!--l. 922--><p class="noindent" >We now want to add the &#8221;Map&#8221; form shown in the front of Figure&#x00A0;<a 
href="#x59-610031">5.1<!--tex4ht:ref: fig:my_contacts_swt --></a>. The purpose of this form is to show a
map corresponding to the address entered into the <span 
class="cmti-10">location </span>field of the person form using the Google Maps
Image API<span class="footnote-mark"><a 
href="scout_intro72.html#fn13x7"><sup class="textsuperscript">13</sup></a></span><a 
 id="x59-74001f13"></a> .
This implies that map images will only be shown in the map form if the entered address can be parsed by
the Google Maps Image API.
<!--l. 928--><p class="indent" >    To create the maps form we start the <span 
class="cmti-10">New Form </span>wizard and enter the new translated text
&#8221;Map&#8221; into the <span 
class="cmti-10">Name </span>field and &#8221;ui.forms&#8221; into the <span 
class="cmti-10">Sub Package </span>field of the first wizard step.
Then, we click the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button to configure the artefacts to be created by the wizard. For
the map form we can use the configuration as shown on the right hand side of Figure&#x00A0;<a 
href="#x59-7100129">5.29<!--tex4ht:ref: fig:new_form_url --></a>
with the difference that we do not need the cancel button. Having deselected all artefacts
except for the ok button and the modify handler, the wizard can be closed with the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span></span>
button.
<!--l. 933--><p class="indent" >    After the form creation wizard has been closed, we can add an &#8221;Address&#8221; variable to the form by
starting the <span 
class="cmti-10">New Property Bean </span>wizard on the <span 
class="cmti-10">Variables </span>node of the newly created map form. In the
property bean wizard, enter &#8221;Address&#8221; into the <span 
class="cmti-10">Name </span>field and set the <span 
class="cmti-10">Bean type </span>field to
<span 
class="cmti-10">String</span>.
<!--l. 936--><p class="indent" >    As the next step, the map image field is added to the from. For this, start the <span 
class="cmti-10">New Form Field</span>
wizard directly on the form&#8217;s <span 
class="cmti-10">MainBox </span>node. In the first form field wizard step, select <span 
class="cmti-10">ImageField </span>as the
field type and click on the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button. Now enter &#8221;Map&#8221; into the <span 
class="cmti-10">Class Name </span>field and close
the second wizard step with the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> </span>button. To set the properties of the new map field,
select the <span 
class="cmti-10">MapField </span>node below the main box node of the map form. In the <span 
class="cmtt-10">MapField</span>&#8217;s Scout
Object Properties untick the <span 
class="cmti-10">Label Visible </span>property and add an <span 
class="cmtt-10">execInitField </span>method by
clicking on the green plus icon next to this operation. The configuration of the map field can
then be completed in section <span 
class="cmti-10">Advanced Properties</span>. Here, we set the <span 
class="cmti-10">Grid H </span>property to 6
and update the <span 
class="cmti-10">Width in Pixel </span>property and the <span 
class="cmti-10">Height in Pixel </span>property to a value of 400
each.
    <!--l. 952--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 952--><p class="indent" >    <a 
 id="x59-74002r24"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-74003"></a>

     <div class="caption" 
><span class="id">Listing&#x00A0;5.24:
     </span><span  
class="content">In
     the
     <span 
class="cmtt-10">execInitField</span>
     method
     of
     the
     map
     form
     the
     image
     content
     is
     fetched
     from
     the
     Google
     Maps
     API.</span></div><!--tex4ht:label?: x59-74002r5.7 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74004r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74005r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-74006"></a><span 
class="cmssi-10">execInitField</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74007r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">address</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">StringUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">nvl</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">getAddress</span><span 
class="cmss-10">()</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74008r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">size</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredHeightInPixel</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">x</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredWidthInPixel</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74009r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">url</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74010r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">try</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74011r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">url</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">http</span><span 
class="cmbx-10">://</span><span 
class="cmbx-10">maps</span><span 
class="cmbx-10">.</span><span 
class="cmbx-10">googleapis</span><span 
class="cmbx-10">.</span><span 
class="cmbx-10">com</span><span 
class="cmbx-10">/</span><span 
class="cmbx-10">maps</span><span 
class="cmbx-10">/</span><span 
class="cmbx-10">api</span><span 
class="cmbx-10">/</span><span 
class="cmbx-10">staticmap</span><span 
class="cmbx-10">?</span><span 
class="cmbx-10">center</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74012r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">URLEncoder</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">encode</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">address</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">ISO</span><span 
class="cmsy-10">-</span><span 
class="cmbx-10">8859</span><span 
class="cmsy-10">-</span><span 
class="cmbx-10">1</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74013r9"></a></span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&amp;</span><span 
class="cmbx-10">zoom</span><span 
class="cmbx-10">=13&amp;</span><span 
class="cmbx-10">size</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">size</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&amp;</span><span 
class="cmbx-10">maptype</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">roadmap</span><span 
class="cmbx-10">&amp;</span><span 
class="cmbx-10">sensor</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">false</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74014r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">setImage</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">IOUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getContent</span><span 
class="cmss-10">((</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">URL</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">url</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">openStream</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74015r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74016r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">catch</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Exception</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">e</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74017r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">setErrorStatus</span><span 
class="cmss-10">(</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingStatus</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">Bad</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">Link</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">url</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">please</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">check</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74018r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingStatus</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">ERROR</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74019r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">setImage</span><span 
class="cmss-10">(</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74020r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">e</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">printStackTrace</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74021r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74022r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74023r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 954--><p class="indent" >    To add the Java code to display the map in the image field, click on the <span 
class="cmti-10">execInitField </span>link in the
Scout Object Properties of the map field. According to the implementation provided in Listing&#x00A0;<a 
href="#x59-74002r24">5.24<!--tex4ht:ref: lst:mycontacts.client.forms.map --></a>, an
URL for the Maps Image API is first constructed. This url also contains the content of the map form&#8217;s
address variable and the configured dimension of the map field. The map picture returned by the Google
API is then read using <span 
class="cmtt-10">IOUtility.getContent </span>and directly fed into the image fields <span 
class="cmtt-10">setImage</span>
method.
<!--l. 959--><p class="indent" >    The last step involving the implementation of the map form feature is its integration into the person
form. As visible on the lower left part of the person form shown in Figure&#x00A0;<a 
href="#x59-610031">5.1<!--tex4ht:ref: fig:my_contacts_swt --></a>, a <span 
class="cmti-10">Show Map ... </span>link is
available. We now add such a link to the person form including the necessary wiring for opening the
newly created map form. For this, navigate to the person form in the Scout SDK and click on its
<span 
class="cmti-10">MainBox </span>node below. Then, open the context menu on the <span 
class="cmti-10">MainBox </span>node and start the <span 
class="cmti-10">New</span>
<span 
class="cmti-10">Form Field </span>wizard. In the first wizard step, select the <span 
class="cmti-10">LinkButton </span>from the available field
types and click the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button to load the second wizard step. Here, just enter the new
translated text &#8221;Show Map ...&#8221; into the <span 
class="cmti-10">Name </span>field and close the wizard with the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span></span>
button.
    <!--l. 974--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 974--><p class="indent" >    <a 
 id="x59-74024r25"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-74025"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.25:
    </span><span  
class="content">The
    implementation
    of
    the
    &#8221;Show
    Map
    &#x2026;&#8221;
    link
    button.
    index</span></div><!--tex4ht:label?: x59-74024r5.7 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74026r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(50.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74027r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ShowMapButton</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractLinkButton</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74028r3"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74029r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74030r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredLabel</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74031r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">TEXTS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">ShowMap</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74032r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74033r8"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74034r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74035r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">execClickAction</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74036r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">MapForm</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">mapForm</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">MapForm</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74037r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">mapForm</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">setAddress</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">getLocationField</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74038r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">mapForm</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">startModify</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74039r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74040r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-74041r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 976--><p class="indent" >    To add the necessary wiring code to the link button double click the <span 
class="cmti-10">ShowMapButton </span>node in the
Scout Explorer and implement its <span 
class="cmtt-10">execClickAction </span>method. As shown in Listing&#x00A0;<a 
href="#x59-74024r25">5.25<!--tex4ht:ref: lst:mycontacts.client.forms.person.clickmaplink --></a>, we only need to
create a new map form in the click action, set its address variable and open the form with
<span 
class="cmtt-10">form.startModify</span>.
    <h3 class="sectionHead"><span class="titlemark">5.8   </span> <a 
 id="x59-750005.8"></a>Managing Person Data on the Server Side</h3>
    <!--l. 989--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 989--><p class="indent" >    <a 
 id="x59-75001r26"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-75002"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.26:
    </span><span  
class="content">The
    <span 
class="cmtt-10">execLoad</span>
    and
    the
    <span 
class="cmtt-10">execStore</span>
    methods
    of
    the
    person
    form&#8217;s
    modify
    handler.</span></div><!--tex4ht:label?: x59-75001r5.8 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75003r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-75004"></a><span 
class="cmssi-10">ModifyHandler</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-75005"></a><span 
class="cmssi-10">AbstractFormHandler</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75006r2"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75007r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75008r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">execLoad</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75009r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">IPersonService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">service</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SERVICES</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getService</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">IPersonService</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75010r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonFormData</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonFormData</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75011r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">exportFormData</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75012r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">service</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">load</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75013r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">importFormData</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75014r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">setEnabledPermission</span><span 
class="cmss-10">(</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">UpdatePersonPermission</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75015r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75016r12"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75017r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75018r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">execStore</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75019r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">IPersonService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">service</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SERVICES</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getService</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">IPersonService</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75020r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonFormData</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonFormData</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75021r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">exportFormData</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75022r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">service</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">store</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75023r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75024r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 991--><p class="indent" >    In the &#8221;My Contacts&#8221; client application the person form is opened via the context menues &#8221;Edit
Person ...&#8221; and &#8221;New Person ...&#8221; on the person page. And for each context menu, the person form is
started with the corresponding form handler. The new handler is used to start the form in the mode to
create new persons while the modify handler is implemented to start the form for updating existing
persons. When we look at the implementation of the modify handler provided in Listing&#x00A0;<a 
href="#x59-75001r26">5.26<!--tex4ht:ref: lst:mycontacts.client.personform.modifyhandler --></a>, we see that
it only contains the two methods <span 
class="cmtt-10">execLoad </span>and <span 
class="cmtt-10">execStore</span>. As described in Section&#x00A0;<a 
href="scout_introch4.html#x27-270003.2.3">3.2.3<!--tex4ht:ref: sec:helloworld.formhandler --></a> of the &#8221;Hello
World&#8221; tutorial, <span 
class="cmtt-10">execLoad </span>is called by the Scout framework when the form is started. And method
<span 
class="cmtt-10">execStore </span>is called by the Scout framework after the user has clicked the <span 
class="cmcsc-10">OK </span>button of a
form.
    <!--l. 1005--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1005--><p class="indent" >    <a 
 id="x59-75027r27"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-75028"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.27:
  </span><span  
class="content">The
  <span 
class="cmtt-10">load</span>
  and
  the
  <span 
class="cmtt-10">store</span>
  methods
  of
  the
  server&#8217;s
  <span 
class="cmtt-10">PersonService</span>.</span></div><!--tex4ht:label?: x59-75027r5.8 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75029r1"></a></span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-75030"></a><span 
class="cmssi-10">PersonService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">implements</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">IPersonService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75031r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75032r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonFormData</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">load</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">PersonFormData</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75033r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(!</span><span 
class="cmssi-10">ACCESS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">check</span><span 
class="cmss-10">(</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ReadPersonPermission</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75034r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throw</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">VetoException</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">TEXTS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">AuthorizationFailed</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75035r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75036r7"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75037r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">selectInto</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">SELECT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75038r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">picture</span><span 
class="cmbx-10">_url</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75039r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">first</span><span 
class="cmbx-10">_name</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75040r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">last</span><span 
class="cmbx-10">_name</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75041r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75042r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">headline</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75043r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">location</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75044r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">date</span><span 
class="cmbx-10">_of</span><span 
class="cmbx-10">_birth</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75045r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">FROM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">PERSON</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75046r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">WHERE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">PERSON</span><span 
class="cmbx-10">_ID</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">personId</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75047r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">INTO</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75048r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">pictureURL</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75049r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">firstName</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75050r21"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">lastName</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75051r22"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75052r23"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">headline</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75053r24"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">location</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75054r25"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">dateOfBirth</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75055r26"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75056r27"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75057r28"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75058r29"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75059r30"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75060r31"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75061r32"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonFormData</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">store</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">PersonFormData</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75062r33"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(!</span><span 
class="cmssi-10">ACCESS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">check</span><span 
class="cmss-10">(</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">UpdatePersonPermission</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75063r34"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throw</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">VetoException</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">TEXTS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">AuthorizationFailed</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75064r35"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75065r36"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75066r37"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">update</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">UPDATE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">PERSON</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">SET</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75067r38"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">picture</span><span 
class="cmbx-10">_url</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">pictureURL</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75068r39"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">first</span><span 
class="cmbx-10">_name</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">firstName</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75069r40"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">last</span><span 
class="cmbx-10">_name</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">lastName</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75070r41"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">headline</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">headline</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75071r42"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">company</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75072r43"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">location</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">location</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75073r44"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">date</span><span 
class="cmbx-10">_of</span><span 
class="cmbx-10">_birth</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">dateOfBirth</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75074r45"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">WHERE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">person</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">personId</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75075r46"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75076r47"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75077r48"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75078r49"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75079r50"></a></span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1007--><p class="indent" >    In both the <span 
class="cmtt-10">execLoad </span>and the <span 
class="cmtt-10">execStore </span>methods, the person service is used. In <span 
class="cmtt-10">execLoad </span>by
calling <span 
class="cmtt-10">service.load </span>to fetch the person&#8217;s data from the Scout server, and in <span 
class="cmtt-10">execStore </span>by calling
<span 
class="cmtt-10">service.store </span>to transfer the updated data to the Scout server. The implementation of the Scout
server&#8217;s <span 
class="cmtt-10">load </span>and <span 
class="cmtt-10">store </span>methods for the <span 
class="cmtt-10">PersonService </span>is provided in Listing&#x00A0;<a 
href="#x59-75027r27">5.27<!--tex4ht:ref: lst:mycontacts.server.services.personservice.load --></a>. To load the correct
person data, the <span 
class="cmtt-10">load </span>method expects the person&#8217;s id as an input parameter <span 
class="cmtt-10">personId </span>in the
<span 
class="cmtt-10">formData</span>.
<!--l. 1012--><p class="indent" >    For the data binding between the <span 
class="cmtt-10">formData </span>and the attributes in the database tables Scout provides
support in the methods of the <span 
class="cmtt-10">SQL </span>class. This support is first searching for the pattern &#8221;:<span 
class="cmmi-10">&#x003C;</span>variable<span 
class="cmmi-10">&#x003E;</span>&#8221; in
the provided SQL statement. For all such patterns found, the binding to the corresponding <span 
class="cmtt-10">getVariable</span>
and <span 
class="cmtt-10">setVariable </span>methods of the form data object is performed by the Scout framework at
runtime.
<!--l. 1016--><p class="indent" >    The implementation of the person form&#8217;s new handler is implemented similar to it&#8217;s modify handler.
Instead of calling the service operations <span 
class="cmtt-10">load </span>and <span 
class="cmtt-10">store</span>, the methods <span 
class="cmtt-10">prepareCreate </span>and <span 
class="cmtt-10">create </span>are
used. In principle, method <span 
class="cmtt-10">prepareCreate </span>is not needed for the &#8221;My Contacts&#8221; application. As its
implementation has been created by the Scout SDK wizard, it does not do any harm and the method can
be left unchanged.
    <!--l. 1028--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1028--><p class="indent" >    <a 
 id="x59-75080r28"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-75081"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.28:
  </span><span  
class="content">The
  <span 
class="cmtt-10">create</span>
  method
  of
  the
  server&#8217;s
  <span 
class="cmtt-10">PersonService</span>.</span></div><!--tex4ht:label?: x59-75080r5.8 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75082r1"></a></span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-75083"></a><span 
class="cmssi-10">PersonService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">implements</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">IPersonService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75084r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75085r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonFormData</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">create</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">PersonFormData</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75086r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(!</span><span 
class="cmssi-10">ACCESS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">check</span><span 
class="cmss-10">(</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">CreatePersonPermission</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75087r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throw</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">VetoException</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">TEXTS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">AuthorizationFailed</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75088r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75089r7"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75090r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">StringUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">isNullOrEmpty</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getPersonId</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75091r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">setPersonId</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">UUID</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">randomUUID</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">toString</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75092r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75093r11"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75094r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">insert</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">INSERT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">INTO</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">PERSON</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">person</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75095r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">SELECT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">personId</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75096r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">FROM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">PERSON</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75097r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">WHERE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">person</span><span 
class="cmbx-10">_id</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">personId</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75098r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">HAVING</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">count</span><span 
class="cmbx-10">(</span><span 
class="cmbsy-10">*</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">0</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75099r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75100r18"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75101r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">store</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75102r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-75103r21"></a></span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1030--><p class="indent" >    In Listing&#x00A0;<a 
href="#x59-75080r28">5.28<!--tex4ht:ref: lst:mycontacts.server.services.personservice.create --></a> the implementation of the <span 
class="cmtt-10">PersonService</span>&#8217;s <span 
class="cmtt-10">create </span>method is provided. First, the
implementation checks if the provided form data contains a person id. If the person has been entered
manually, a person id is initially missing and a new one needs to be created and assigned. For this,
method <span 
class="cmtt-10">randomUUID() </span>of the Java class <span 
class="cmtt-10">java.util.UUID </span>is used. The only responsibility of the <span 
class="cmtt-10">INSERT</span>
statement following the person id check is to make sure we will have a row in the <span 
class="cmtt-10">PERSON </span>table for the
person to be created. To save all the other form data parameters, we can reuse the previously
implemented <span 
class="cmtt-10">store </span>method.
    <h3 class="sectionHead"><span class="titlemark">5.9   </span> <a 
 id="x59-760005.9"></a>Creating the Company Form</h3>
<!--l. 1041--><p class="noindent" >Creating the company form and the necessary backend services is not described here. Instead, this
task is left as an exercise to the reader and in the text below some minimal guidelines are
provided.
<!--l. 1044--><p class="indent" >    To create the company form, start with the <span 
class="cmti-10">New Form </span>wizard as in the case of the person form. This
will then create all necessary artefacts including the forms, the server service, and the form data for the
communication between the client and the server. And don&#8217;t forget to add a <span 
class="cmtt-10">companyId </span>variable to the
company form. To decide on the fields that need to be on the company form you may check the setup of
the database schema provided in Listing&#x00A0;<a 
href="#x59-66001r9">5.9<!--tex4ht:ref: lst:mycontacts.server.services.installdb.company --></a>. If in doubt about what to do, please refer to the procedure
used to create the person form.
<!--l. 1050--><p class="indent" >    In case you get lost completely, you may download the &#8221;My Contacts&#8221;
application from this books Github repository as described in the Scout
wiki<span class="footnote-mark"><a 
href="scout_intro73.html#fn14x7"><sup class="textsuperscript">14</sup></a></span><a 
 id="x59-76001f14"></a> .
    <h3 class="sectionHead"><span class="titlemark">5.10   </span> <a 
 id="x59-770005.10"></a>Adding the Scribe Library to the Application</h3>
<!--l. 1057--><p class="noindent" >To access data from sites such as LinkedIn, Xing, Google+ or Facebook, most social networks provide an API that
requires user authentication. The current defacto standard for such authentication is the Open Authentication
Protocol (OAuth)<span class="footnote-mark"><a 
href="scout_intro74.html#fn15x7"><sup class="textsuperscript">15</sup></a></span><a 
 id="x59-77001f15"></a> 
<!--l. 1062--><p class="indent" >    The big advantage of the OAuth standard is the authentication based on access tokens. If an
application such as the &#8221;My Contacts&#8221; example is in possession of an access token, it can fetch data from
the hosting site or even act on the users behalf. The access token itself just contains two values, the
token and the secret. And both values are completely separate from the user&#8217;s username
                                                                                 

                                                                                 
and password credentials. This means that an access token may be safely stored in other
applications. Should such an application or its data get compromised, the username and
password are still save and the user just has to remove/invalidate the compromised access
token.
<!--l. 1069--><p class="indent" >    For the &#8221;My Contacts&#8221; application we use the Scribe Java
library<span class="footnote-mark"><a 
href="scout_intro75.html#fn16x7"><sup class="textsuperscript">16</sup></a></span><a 
 id="x59-77002f16"></a> 
This library makes accessing social services very simple. At the same time the Scribe library is used here
to demonstrate the integration of external Java libraries in Scout applications.
<!--l. 1075--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7700337"></a>
                                                                                 

                                                                                 

<!--l. 1076--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_library_scribe_contextmenu.png" alt="PIC"  
> &#x00A0;
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.37: </span><span  
class="content">Add a new bundle to hold the Scribe JARs.</span></div><!--tex4ht:label?: x59-7700337 -->
                                                                                 

                                                                                 
<!--l. 1079--><p class="indent" >    </div><hr class="endfigure">
<!--l. 1081--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7700438"></a>
                                                                                 

                                                                                 

<!--l. 1082--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_library_scribe_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_library_scribe_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.38: </span><span  
class="content">Specify the JARs to be contained in the library bundle and the library name.</span></div><!--tex4ht:label?: x59-7700438 -->
                                                                                 

                                                                                 
<!--l. 1086--><p class="indent" >    </div><hr class="endfigure">
<!--l. 1088--><p class="indent" >    As we will use the Scribe library only on the Scout server side start the Scout SDK
<span 
class="cmti-10">New Library Bundle </span>wizard below the blue server node as shown in Figure&#x00A0;<a 
href="#x59-7700337">5.37<!--tex4ht:ref: fig:new_library_scribe_contextmenu --></a>. In the first
wizard step shown on the left side of Figure&#x00A0;<a 
href="#x59-7700438">5.38<!--tex4ht:ref: fig:new_library_scribe --></a> add the files <span class="path"><span 
class="cmtt-10">scribe-1.3.5.jar</span></span> and
<span class="path"><span 
class="cmtt-10">commons-codec-1.9.jar</span></span><span class="footnote-mark"><a 
href="scout_intro76.html#fn17x7"><sup class="textsuperscript">17</sup></a></span><a 
 id="x59-77005f17"></a> 
using the <span 
class="cmcsc-10">A<span 
class="small-caps">d</span><span 
class="small-caps">d</span> </span>button. Once the two JAR files are listed in the library list of the wizard click the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span></span>
button. On the second wizard step, enter &#8221;org.scribe&#8221; into the <span 
class="cmti-10">Bundle Name </span>field as shown on the right
side of Figure&#x00A0;<a 
href="#x59-7700438">5.38<!--tex4ht:ref: fig:new_library_scribe --></a>. Then, close the wizard with the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> </span>button.
<!--l. 1097--><p class="indent" >    The Scout SDK wizard then creates the corresponding library plugin and updates the server product
files and the plugin dependencies of the applications server plugin accordingly. Once the wizard has
completed the classes defined in the two JAR files can directly be accessed from the &#8221;My Contact&#8221;
application&#8217;s server plugin.
    <h3 class="sectionHead"><span class="titlemark">5.11   </span> <a 
 id="x59-780005.11"></a>Integrating LinkedIn Access with Scribe</h3>
    <!--l. 1110--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1110--><p class="indent" >    <a 
 id="x59-78001r29"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-78002"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.29:
  </span><span  
class="content">The
  <span 
class="cmtt-10">LinkedInService</span>
  service
  with
  it&#8217;s
  <span 
class="cmtt-10">initializeService</span>
  method
  defined
  in
  the
  <span 
class="cmtt-10">IService</span>
  interface.</span></div><!--tex4ht:label?: x59-78001r5.11 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78003r1"></a></span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LinkedInService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">implements</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ILinkedInService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78004r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">final</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">static</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LINKEDIN</span><span 
class="cmssi-10">_TOKEN</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">linkedin</span><span 
class="cmbx-10">_access</span><span 
class="cmbx-10">_token</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78005r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">final</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">static</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LINKEDIN</span><span 
class="cmssi-10">_SECRET</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">linkedin</span><span 
class="cmbx-10">_access</span><span 
class="cmbx-10">_secret</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78006r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">final</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">static</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LINKEDIN</span><span 
class="cmssi-10">_CONNECTIONS</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">http</span><span 
class="cmbx-10">://</span><span 
class="cmbx-10">api</span><span 
class="cmbx-10">.</span><span 
class="cmbx-10">linkedin</span><span 
class="cmbx-10">.</span><span 
class="cmbx-10">com</span><span 
class="cmbx-10">/</span><span 
class="cmbx-10">v1</span><span 
class="cmbx-10">/</span><span 
class="cmbx-10">people</span><span 
class="cmbx-10">/&#x02DC;/</span><span 
class="cmbx-10">connections</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78007r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">static</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">IScoutLogger</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LOG</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ScoutLogManager</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getLogger</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">LinkedInService</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78008r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">OAuthService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_service</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78009r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Token</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_requestToken</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78010r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Token</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_accessToken</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78011r9"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78012r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78013r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-78014"></a><span 
class="cmssi-10">initializeService</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">ServiceRegistration</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">registration</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78015r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">super</span><span 
class="cmss-10">.</span><a 
 id="dx59-78016"></a><span 
class="cmssi-10">initializeService</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">registration</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78017r13"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78018r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_service</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ServiceBuilder</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78019r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">provider</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">LinkedInApi</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">withScopes</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">r</span><span 
class="cmbx-10">_network</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78020r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">apiKey</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">CiEgwWDkA5BFpNrc0RfGyVuSlOh4tig5kOTZ9q97qcXNrFl7zqk</span><span 
class="cmsy-10">-</span><span 
class="cmbx-10">Ts7DqRGaKDCV</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78021r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">apiSecret</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">dhho4dfoCmiQXrkw4yslork5XWLFnPSuMR</span><span 
class="cmsy-10">-</span><span 
class="cmbx-10">8</span><span 
class="cmbx-10">gscPVjY4jqFFHPYWJKgpFl4uLTM6</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78022r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">build</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78023r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78024r20"></a></span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1112--><p class="indent" >    To access the LinkedIn data with Scribe we first create a new service <span 
class="cmtt-10">LinkedInService </span>with
the <span 
class="cmti-10">New Service </span>wizard in the <span 
class="cmti-10">Services </span>folder under the blue server node. In the wizard,
enter &#8221;LinkedIn&#8221; into the <span 
class="cmti-10">Class Name </span>field and &#8221;services&#8221; into the <span 
class="cmti-10">Sub Package </span>field. Before
we add any service operations to the LinkedIn service, the service initialization method is
implemented according to Listing&#x00A0;<a 
href="#x59-78001r29">5.29<!--tex4ht:ref: lst:mycontacts.server.linkedin.initialize --></a>. This initialization is not discussed further here. Instead,
the interested reader is referred to the corresponding <span 
class="cmtt-10">LinkedInExample </span>on the Scribe web
pages<span class="footnote-mark"><a 
href="scout_intro77.html#fn18x7"><sup class="textsuperscript">18</sup></a></span><a 
 id="x59-78025f18"></a> .
<!--l. 1120--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7802639"></a>
                                                                                 

                                                                                 

<!--l. 1121--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_operation_authurl_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_operation_authurl.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.39: </span><span  
class="content">Add the operation to retrieve an authentication URL.</span></div><!--tex4ht:label?: x59-7802639 -->
                                                                                 

                                                                                 
<!--l. 1125--><p class="indent" >    </div><hr class="endfigure">
    <!--l. 1134--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1134--><p class="indent" >    <a 
 id="x59-78027r30"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-78028"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.30:
    </span><span  
class="content">The
    <span 
class="cmtt-10">getAuthUrl</span>
    method
    of
    the
    LinkedIn
    service.</span></div><!--tex4ht:label?: x59-78027r5.11 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78029r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78030r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getAuthUrl</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78031r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_requestToken</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_service</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getRequestToken</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78032r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">authLink</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_service</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getAuthorizationUrl</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_requestToken</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78033r5"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78034r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">authLink</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78035r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1136--><p class="indent" >    The first service operation <span 
class="cmtt-10">getAuthUrl </span>is added according to Figure&#x00A0;<a 
href="#x59-7802639">5.39<!--tex4ht:ref: fig:new_operation_authurl --></a>. This operation will return
the necessary information to create a request token and provides a link to open in a web
browser to start the authentication against the LinkedIn account. For its implementation see
Listing&#x00A0;<a 
href="#x59-78027r30">5.30<!--tex4ht:ref: lst:mycontacts.server.linkedin.authurl --></a>.
<!--l. 1140--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7803840"></a>
                                                                                 

                                                                                 

<!--l. 1141--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_operation_refreshtoken.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_operation_updatecontacts.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.40: </span><span  
class="content">Add the operations to refresh the access token and to update the LinkedIn contacts.</span></div><!--tex4ht:label?: x59-7803840 -->
                                                                                 

                                                                                 
<!--l. 1145--><p class="indent" >    </div><hr class="endfigure">
<!--l. 1147--><p class="indent" >    The next operations we add are used to refresh the users access token stored in the &#8221;My Contacts&#8221;
application and to refresh or download the users contacts stored in the user&#8217;s LinkedIn account. See
Figure&#x00A0;<a 
href="#x59-7803840">5.40<!--tex4ht:ref: fig:new_operation_refresh_update --></a> for the necessary details for the creation of the two methods. The <span 
class="cmti-10">New Service Operation</span>
wizard only allows to provide two parameters. As we need three parameters for the method
<span 
class="cmtt-10">refreshToken</span>, we have to amend the security code parameter manually. For this, first update the
interface <span 
class="cmtt-10">ILinkedInService </span>and amend the parameter list with the additional String parameter
<span 
class="cmtt-10">securityCode</span>. Then, open class <span 
class="cmtt-10">LinkedInService </span>and add the String parameter <span 
class="cmtt-10">securityCode</span>
according to interface just updated before.
    <!--l. 1160--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1160--><p class="indent" >    <a 
 id="x59-78039r31"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-78040"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.31:
    </span><span  
class="content">The
    <span 
class="cmtt-10">refreshToken</span>
    method
    is
    used
    to
    create
    a
    new
    access
    token
    to
    fetch
    data
    from
    the
    LinkedIn
    API.</span></div><!--tex4ht:label?: x59-78039r5.11 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78041r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78042r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">refreshToken</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">securityCode</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78043r3"></a></span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">//</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">turn</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">request</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">token</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">into</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">access</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">token</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78044r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_accessToken</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_service</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getAccessToken</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_requestToken</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Verifier</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">securityCode</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78045r5"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78046r6"></a></span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">//</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">make</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">sure</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">current</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">user</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">has</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">param</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">records</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">for</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">linkedin</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">token</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78047r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">userName</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ServerSession</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getUserId</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78048r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">insert</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">INSERT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">INTO</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">USERS</span><span 
class="cmbx-10">_PARAM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78049r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">SELECT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">as</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">as</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78050r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">FROM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">USERS</span><span 
class="cmbx-10">_PARAM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78051r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">WHERE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">AND</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">HAVING</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">count</span><span 
class="cmbx-10">(</span><span 
class="cmbsy-10">*</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">0</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78052r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78053r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">userName</span><span 
class="cmss-10">)</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LINKEDIN</span><span 
class="cmssi-10">_TOKEN</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78054r14"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78055r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">insert</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">INSERT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">INTO</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">USERS</span><span 
class="cmbx-10">_PARAM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78056r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">SELECT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">as</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">,</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">as</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78057r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">FROM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">USERS</span><span 
class="cmbx-10">_PARAM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78058r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">WHERE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">AND</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">HAVING</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">count</span><span 
class="cmbx-10">(</span><span 
class="cmbsy-10">*</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">0</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78059r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78060r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">userName</span><span 
class="cmss-10">)</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LINKEDIN</span><span 
class="cmssi-10">_SECRET</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78061r21"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78062r22"></a></span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">//</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">update</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">param</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">records</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">with</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">new</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">access</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">token</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78063r23"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">update</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">UPDATE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">USERS</span><span 
class="cmbx-10">_PARAM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">set</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">value</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">value</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78064r24"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">WHERE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">AND</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78065r25"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">value</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_accessToken</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getToken</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78066r26"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">userName</span><span 
class="cmss-10">)</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LINKEDIN</span><span 
class="cmssi-10">_TOKEN</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78067r27"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78068r28"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">update</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">UPDATE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">USERS</span><span 
class="cmbx-10">_PARAM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">set</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">value</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">value</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78069r29"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">WHERE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">AND</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78070r30"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">value</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_accessToken</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getSecret</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78071r31"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">userName</span><span 
class="cmss-10">)</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LINKEDIN</span><span 
class="cmssi-10">_SECRET</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78072r32"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1162--><p class="indent" >    Method <span 
class="cmtt-10">refreshToken </span>can now be implemented according to Listing&#x00A0;<a 
href="#x59-78039r31">5.31<!--tex4ht:ref: lst:mycontacts.server.linkedin.refreshtoken --></a>. Using the provided token
parameters and the security code, the access token is created using the <span 
class="cmtt-10">m</span><span 
class="cmtt-10">_service.getAccessToken </span>method.
Then, the user id of the currently logged in user is obtained with <span 
class="cmtt-10">ServerSession.get().getUserId()</span>.
Once we have both the access token and the user id available in method refreshToken, we can
store the token and the secret values for the current user in table <span 
class="cmtt-10">USERS</span><span 
class="cmtt-10">_PARAM </span>according to
Listing&#x00A0;<a 
href="#x59-78039r31">5.31<!--tex4ht:ref: lst:mycontacts.server.linkedin.refreshtoken --></a>.
    <!--l. 1174--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1174--><p class="indent" >    <a 
 id="x59-78075r32"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-78076"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.32:
    </span><span  
class="content">The
    <span 
class="cmtt-10">readContacts</span>
    method
    to
    fetch
    the
    users
    connection
    using
    the
    LinkedIn
    API.
    The
    necessary
    access
    token
    is
    created
    in
    method
    <span 
class="cmtt-10">getToken</span>
    based
    on
    the
    information
    stored
    in
    the
    database
    for
    the
    logged
    in
    user.</span></div><!--tex4ht:label?: x59-78075r5.11 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78077r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NodeList</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">readContacts</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78078r2"></a></span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">//</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">check</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">if</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">we</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">need</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">to</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">load</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">the</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">access</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">token</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78079r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_accessToken</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">==</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78080r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_accessToken</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getToken</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78081r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78082r6"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78083r7"></a></span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">//</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">create</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">singned</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">linkedin</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">request</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">and</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">get</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">response</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78084r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">OAuthRequest</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">request</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">OAuthRequest</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Verb</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">GET</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LINKEDIN</span><span 
class="cmssi-10">_CONNECTIONS</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78085r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_service</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">signRequest</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">m</span><span 
class="cmssi-10">_accessToken</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">request</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78086r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Response</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">response</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">request</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">send</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78087r11"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78088r12"></a></span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">//</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">parse</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">linkedin</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">response</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">stream</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78089r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Element</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">element</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78090r14"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78091r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">try</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78092r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">DocumentBuilder</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">builder</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">DocumentBuilderFactory</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">newInstance</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">newDocumentBuilder</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78093r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Document</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">document</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">builder</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">parse</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">response</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getStream</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78094r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">element</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">document</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getDocumentElement</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78095r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78096r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">catch</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Exception</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">e</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78097r21"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throw</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">e</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getMessage</span><span 
class="cmss-10">()</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">e</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78098r22"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78099r23"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78100r24"></a></span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">//</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">basic</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">error</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">handling</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78101r25"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">element</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getNodeName</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">equals</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">error</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78102r26"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LOG</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">error</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">DomUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getString</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">element</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78103r27"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throw</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">DomUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getString</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">element</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78104r28"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78105r29"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78106r30"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">element</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getChildNodes</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78107r31"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
    <!--l. 1182--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1182--><p class="indent" >    <a 
 id="x59-78108r33"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-78109"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.33:
  </span><span  
class="content">The
  necessary
  access
  token
  is
  created
  in
  method
  <span 
class="cmtt-10">getToken</span>
  based
  on
  the
  information
  stored
  in
  the
  database
  for
  the
  logged
  in
  user.</span></div><!--tex4ht:label?: x59-78108r5.11 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78110r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Token</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getToken</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78111r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">userName</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ServerSession</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getUserId</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78112r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">StringHolder</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">value</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">StringHolder</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78113r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">StringHolder</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">secret</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">StringHolder</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78114r5"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78115r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">selectInto</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">SELECT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">value</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">INTO</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">value</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">FROM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">USERS</span><span 
class="cmbx-10">_PARAM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78116r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">WHERE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">AND</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78117r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">value</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">value</span><span 
class="cmss-10">)</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78118r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LINKEDIN</span><span 
class="cmssi-10">_TOKEN</span><span 
class="cmss-10">)</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78119r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">userName</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78120r11"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78121r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SQL</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">selectInto</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">SELECT</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">value</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">INTO</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">secret</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">FROM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">USERS</span><span 
class="cmbx-10">_PARAM</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78122r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">WHERE</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">AND</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">=</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">:</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78123r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">secret</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">secret</span><span 
class="cmss-10">)</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78124r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">param</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LINKEDIN</span><span 
class="cmssi-10">_SECRET</span><span 
class="cmss-10">)</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78125r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NVPair</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">username</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">userName</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78126r17"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78127r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">StringUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">isNullOrEmpty</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">value</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78128r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">message</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">No</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">valid</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">LinkedIn</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">token</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">stored</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">for</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">user</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78129r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">userName</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">+</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">.</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">Please</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">(</span><span 
class="cmbx-10">re</span><span 
class="cmbx-10">)</span><span 
class="cmbx-10">create</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">a</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">token</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78130r21"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LOG</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">error</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">message</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78131r22"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78132r23"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throw</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">message</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78133r24"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78134r25"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78135r26"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Token</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">value</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">()</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">secret</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78136r27"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78137r28"></a></span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1184--><p class="indent" >    The next step is to add a method <span 
class="cmtt-10">readContacts </span>to fetch the list of contacts from a LinkedIn account.
According to Listing&#x00A0;<a 
href="#x59-78075r32">5.32<!--tex4ht:ref: lst:mycontacts.server.linkedin.readcontacts --></a>, this private <span 
class="cmtt-10">LinkedInService </span>method reads the data from LinkedIn into a DOM
tree<span class="footnote-mark"><a 
href="scout_intro78.html#fn19x7"><sup class="textsuperscript">19</sup></a></span><a 
 id="x59-78138f19"></a> .
For this, a signed OAuth request is first created using the access token provided by method
<span 
class="cmtt-10">getToken </span>according to Listing&#x00A0;<a 
href="#x59-78108r33">5.33<!--tex4ht:ref: lst:mycontacts.server.linkedin.gettoken --></a>. The request specified by constant <span 
class="cmtt-10">LINKEDIN</span><span 
class="cmtt-10">_CONNECTIONS </span>is
defined as <span 
class="cmtt-10">http://api.linkedin.com/v1/people/~/connections</span>. According to the API
specification<span class="footnote-mark"><a 
href="scout_intro79.html#fn20x7"><sup class="textsuperscript">20</sup></a></span><a 
 id="x59-78139f20"></a> ,
this returns all connections of the user in the response. The response in the form of an XML document
can then be parsed and returned in the form of a node list.
<!--l. 1196--><p class="indent" >    To sign the request to fetch the data from LinkedIn, the access token is retrieved from
the database of the &#8221;My Contact&#8221; application using method <span 
class="cmtt-10">getToken</span>. According to the
implementation provided in Listing&#x00A0;<a 
href="#x59-78075r32">5.32<!--tex4ht:ref: lst:mycontacts.server.linkedin.readcontacts --></a> the user id is first obtained from the user&#8217;s server session. The
necessary parameters to create the access token are then retrieved from the <span 
class="cmtt-10">USERS</span><span 
class="cmtt-10">_PARAM</span>
table.
    <!--l. 1200-->
                                                                                 

                                                                                 
<!--l. 1206--><p class="indent" >    <a 
 id="x59-78140r34"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-78141"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.34:
    </span><span  
class="content">A
    sample
    contact
    represented
    in
    the
    XML
    format
    provided
    by
    the
    LinkedIn
    API.</span></div><!--tex4ht:label?: x59-78140r5.11 --><div class="lstlisting" id="listing-6"><span class="label"><a 
 id="x59-78142r1"></a></span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">?</span><span 
class="cmss-10">xml</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">version</span><span 
class="cmss-10">=&#8221;1.0&#8221;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">encoding</span><span 
class="cmss-10">=&#8221;</span><span 
class="cmss-10">UTF</span><span 
class="cmsy-10">-</span><span 
class="cmss-10">16&#8221;</span><span 
class="cmss-10">?</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78143r2"></a></span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">person</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78144r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">id</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">f7R6wGcblj</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">/</span><span 
class="cmss-10">id</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78145r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">first</span><span 
class="cmsy-10">-</span><span 
class="cmss-10">name</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">Mike</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">/</span><span 
class="cmss-10">first</span><span 
class="cmsy-10">-</span><span 
class="cmss-10">name</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78146r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">last</span><span 
class="cmsy-10">-</span><span 
class="cmss-10">name</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">Milinkovich</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">/</span><span 
class="cmss-10">last</span><span 
class="cmsy-10">-</span><span 
class="cmss-10">name</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78147r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">headline</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">Executive</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">Director</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">at</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">Eclipse</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">Foundation</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">/</span><span 
class="cmss-10">headline</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78148r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">picture</span><span 
class="cmsy-10">-</span><span 
class="cmss-10">url</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">http</span><span 
class="cmss-10">://</span><span 
class="cmss-10">m3</span><span 
class="cmss-10">.</span><span 
class="cmss-10">licdn</span><span 
class="cmss-10">.</span><span 
class="cmss-10">com</span><span 
class="cmss-10">/</span><span 
class="cmss-10">mpr</span><span 
class="cmss-10">/</span><span 
class="cmss-10">mprx</span><span 
class="cmss-10">/0</span><span 
class="cmss-10">_IUM7Se9vBU</span><span 
class="cmss-10">...</span><span 
class="cmss-10">SbRbQZ4</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">/</span><span 
class="cmss-10">picture</span><span 
class="cmsy-10">-</span><span 
class="cmss-10">url</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78149r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">site</span><span 
class="cmsy-10">-</span><span 
class="cmss-10">standard</span><span 
class="cmsy-10">-</span><span 
class="cmss-10">profile</span><span 
class="cmsy-10">-</span><span 
class="cmss-10">request</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78150r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">url</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">http</span><span 
class="cmss-10">://</span><span 
class="cmss-10">www</span><span 
class="cmss-10">.</span><span 
class="cmss-10">linkedin</span><span 
class="cmss-10">.</span><span 
class="cmss-10">com</span><span 
class="cmss-10">/</span><span 
class="cmss-10">profile</span><span 
class="cmss-10">/</span><span 
class="cmss-10">view</span><span 
class="cmss-10">?</span><span 
class="cmss-10">id</span><span 
class="cmss-10">=14949387...05720</span><span 
class="cmsy-10">*</span><span 
class="cmss-10">s114280</span><span 
class="cmsy-10">*</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">/</span><span 
class="cmss-10">url</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78151r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">/</span><span 
class="cmss-10">site</span><span 
class="cmsy-10">-</span><span 
class="cmss-10">standard</span><span 
class="cmsy-10">-</span><span 
class="cmss-10">profile</span><span 
class="cmsy-10">-</span><span 
class="cmss-10">request</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78152r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">location</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78153r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">name</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">Ottawa</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">Canada</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">Area</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">/</span><span 
class="cmss-10">name</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78154r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">country</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78155r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">code</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">ca</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">/</span><span 
class="cmss-10">code</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78156r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">/</span><span 
class="cmss-10">country</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78157r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">/</span><span 
class="cmss-10">location</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78158r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">industry</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">Computer</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">Software</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">/</span><span 
class="cmss-10">industry</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78159r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">/</span><span 
class="cmss-10">person</span><span 
class="cmmi-10">&#x003E;</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1227--><p class="indent" >    Before we proceed, we take a look at the actual form of the data that will be provided by the
LinkedIn API. From the sample XML extract provided in Listing&#x00A0;<a 
href="#x59-78140r34">5.34<!--tex4ht:ref: lst:linkedin.samplexmlcontact --></a>, we can identify the person id
<span 
class="cmtt-10">f7R6wGcblj</span>, the first name <span 
class="cmtt-10">Mike </span>and some other attribute names with associated attribute values. A
closer look reveals the identity of the person to be Mike Milinkovich, a well known character in the
Eclipse community. For the purpose of the &#8221;My Contacts&#8221; application it is sufficient to be able to extract
the top-level elements that hold the name, headline, and location information. As the location string is
contained in a <span 
class="cmtt-10">name </span>element inside the <span 
class="cmtt-10">location </span>element of the person, we need to be able
to extract the content of either top level elements or the level directly below. To simplify
access to this data provided by the LinkedIn API we implement a small helper class named
<span 
class="cmtt-10">DomUtility</span>.
<!--l. 1234--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7816041"></a>
                                                                                 

                                                                                 

<!--l. 1235--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_class_domutil_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_class_domutil_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.41: </span><span  
class="content">Adding the <span 
class="cmtt-10">DomUtility </span>class to the server package.</span></div><!--tex4ht:label?: x59-7816041 -->
                                                                                 

                                                                                 
<!--l. 1239--><p class="indent" >    </div><hr class="endfigure">
    <!--l. 1247--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1247--><p class="indent" >    <a 
 id="x59-78161r35"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-78162"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.35:
  </span><span  
class="content">The
  <span 
class="cmtt-10">DomUtility</span>
  class
  provides
  functions
  to
  parse
  the
  XML
  data
  structure
  provided
  by
  the
  LinkedIn
  API.</span></div><!--tex4ht:label?: x59-78161r5.11 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78163r1"></a></span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">DomUtility</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78164r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">private</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">static</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Node</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getSubElement</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Node</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">parent</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">name</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78165r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NodeList</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">nodes</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">((</span><span 
class="cmssi-10">Element</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">parent</span><span 
class="cmss-10">)</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getElementsByTagName</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">name</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78166r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">nodes</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getLength</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">==</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">0)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78167r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78168r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78169r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">nodes</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">item</span><span 
class="cmss-10">(0)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78170r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78171r9"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78172r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">static</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Node</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">node</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">name</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78173r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Node</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">n</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getSubElement</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">node</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">name</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78174r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">n</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">==</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78175r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78176r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78177r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">n</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getTextContent</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78178r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78179r17"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78180r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">static</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Node</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">node</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">name</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">subName</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78181r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Node</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">n</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getSubElement</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">node</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">name</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78182r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">n</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">==</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78183r21"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78184r22"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78185r23"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">n</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">subName</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78186r24"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78187r25"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78188r26"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">static</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getString</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Element</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">element</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78189r27"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Document</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">document</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">element</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getOwnerDocument</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78190r28"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">DOMImplementationLS</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">domImplLS</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">DOMImplementationLS</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">document</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getImplementation</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78191r29"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LSSerializer</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">serializer</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">domImplLS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">createLSSerializer</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78192r30"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">serializer</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">writeToString</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">element</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78193r31"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78194r32"></a></span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1249--><p class="indent" >    For adding the class <span 
class="cmtt-10">DomUtility</span>, the Eclipse <span 
class="cmti-10">New Java Class </span>wizard can be used according to
Figure&#x00A0;<a 
href="#x59-7816041">5.41<!--tex4ht:ref: fig:new_class_domutil --></a>. This wizard can by started by pressing the <span 
class="cmmi-10">&#x003C;</span><span 
class="cmcsc-10"><span 
class="small-caps">c</span><span 
class="small-caps">t</span><span 
class="small-caps">r</span><span 
class="small-caps">l</span></span><span 
class="cmmi-10">&#x003E;</span>+<span 
class="cmmi-10">&#x003C;</span><span 
class="cmcsc-10"><span 
class="small-caps">n</span></span><span 
class="cmmi-10">&#x003E; </span>keys. In the first wizard step
select the class element under the Java folder and click the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button. And in the second wizard step
ensure that the new class will be created in the <span 
class="cmtt-10">org.eclipsescout.contacts.server.services</span>
package. Then enter &#8221;DomUtility&#8221; into the <span 
class="cmti-10">Name </span>field and close the wizard with the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> </span>button. The
implementation of the class is provided in Listing&#x00A0;<a 
href="#x59-78161r35">5.35<!--tex4ht:ref: lst:mycontacts.server.linkedin.domutil --></a>. Before the class can be saved, the necessary
imports need to be fixed by pressing <span 
class="cmmi-10">&#x003C;</span><span 
class="cmcsc-10"><span 
class="small-caps">c</span><span 
class="small-caps">t</span><span 
class="small-caps">r</span><span 
class="small-caps">l</span></span><span 
class="cmmi-10">&#x003E;</span>+<span 
class="cmmi-10">&#x003C;</span><span 
class="cmcsc-10"><span 
class="small-caps">s</span><span 
class="small-caps">h</span><span 
class="small-caps">i</span><span 
class="small-caps">f</span><span 
class="small-caps">t</span></span><span 
class="cmmi-10">&#x003E;</span>+<span 
class="cmmi-10">&#x003C;</span><span 
class="cmcsc-10"><span 
class="small-caps">o</span></span><span 
class="cmmi-10">&#x003E; </span>and selecting the components provided in
the <span 
class="cmtt-10">org.w3c.dom </span>packages.
    <!--l. 1263--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1263--><p class="indent" >    <a 
 id="x59-78195r36"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-78196"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.36:
    </span><span  
class="content">The
    <span 
class="cmtt-10">updateContacts</span>
    method
    is
    used
    to
    enter/update
    existing
    contacts
    based
    on
    new
    data
    fetched
    from
    LinkedIn.</span></div><!--tex4ht:label?: x59-78195r5.11 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78197r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78198r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">updateContacts</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78199r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">try</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78200r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">IPersonService</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">service</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SERVICES</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getService</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">IPersonService</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78201r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">NodeList</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">persons</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">readContacts</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78202r6"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78203r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">for</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssbx-10">int</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">i</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">i</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">persons</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getLength</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">i</span><span 
class="cmss-10">++)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78204r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">persons</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">item</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">i</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">instanceof</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Element</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78205r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Element</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">person</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Element</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">persons</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">item</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">i</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78206r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">LOG</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">info</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">DomUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getString</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">person</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78207r11"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78208r12"></a></span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">//</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">load</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">existing</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">person</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">data</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78209r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonFormData</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">PersonFormData</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78210r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">setPersonId</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">DomUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">person</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">id</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78211r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">service</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">load</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78212r16"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78213r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getPictureURL</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">setValue</span><span 
class="cmss-10">(</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78214r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">DomUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">person</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">picture</span><span 
class="cmsy-10">-</span><span 
class="cmbx-10">url</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78215r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getFirstName</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">setValue</span><span 
class="cmss-10">(</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78216r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">DomUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">person</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">first</span><span 
class="cmsy-10">-</span><span 
class="cmbx-10">name</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78217r21"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getLastName</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">setValue</span><span 
class="cmss-10">(</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78218r22"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">DomUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">person</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">last</span><span 
class="cmsy-10">-</span><span 
class="cmbx-10">name</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78219r23"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getHeadline</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">setValue</span><span 
class="cmss-10">(</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78220r24"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">StringUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">substring</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">DomUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">person</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">headline</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">0,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">64)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78221r25"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getLocation</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">setValue</span><span 
class="cmss-10">(</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78222r26"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">DomUtility</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">person</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">location</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">name</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78223r27"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78224r28"></a></span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">//</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">save</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">new</span><span 
class="cmti-10">/</span><span 
class="cmti-10">updated</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">person</span><span 
class="cmti-10">&#x00A0;</span><span 
class="cmti-10">data</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78225r29"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">service</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">create</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">formData</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78226r30"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78227r31"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78228r32"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78229r33"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">catch</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">Exception</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">e</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78230r34"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throw</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">LinkedIn</span><span 
class="cmbx-10">&#x00A0;</span><span 
class="cmbx-10">Error</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">e</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78231r35"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-78232r36"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1265--><p class="indent" >    We now have finished all necessary parts to implement the method <span 
class="cmtt-10">updateContacts </span>of the server
service <span 
class="cmtt-10">LinkedInService </span>according to Listing&#x00A0;<a 
href="#x59-78195r36">5.36<!--tex4ht:ref: lst:mycontacts.server.linkedin.updatecontacts --></a>. In this method a service reference to the person
process service is obtained first. Then, the LinkedIn contacts provided by method <span 
class="cmtt-10">readContacts </span>are
stored in a <span 
class="cmtt-10">persons </span>list object. Finally, each person can be updated with the data available from
LinkedIn. To update a single person the following steps are performed in the person loop. First, a form
data is created and its id parameter is set to <span 
class="cmtt-10">DomUtility.getValue(person, "id")</span>. Using the <span 
class="cmtt-10">load</span>
method of the person process service the person&#8217;s attributes are loaded from the server&#8217;s
database. The LinkedIn attributes are then used to update the corresponding form data. With
<span 
class="cmtt-10">service.create(formData) </span>the updated form data is then stored in the &#8221;My Contacts&#8221;
database.
    <h3 class="sectionHead"><span class="titlemark">5.12   </span> <a 
 id="x59-790005.12"></a>Fetching Contacts from LinkedIn</h3>
<!--l. 1278--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7900142"></a>
                                                                                 

                                                                                 

<!--l. 1279--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_form_token_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_form_token_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.42: </span><span  
class="content">Add the form to refresh the LinkedIn access token.</span></div><!--tex4ht:label?: x59-7900142 -->
                                                                                 

                                                                                 
<!--l. 1283--><p class="noindent" ></div><hr class="endfigure">
<!--l. 1285--><p class="indent" >    The last piece that is missing to complete the &#8221;My Contacts&#8221; application is the user interface for the
LinkedIn integration. To allow the user to create/refresh an access token, we need to implement
the refresh token form shown in Figure&#x00A0;<a 
href="#x59-610052">5.2<!--tex4ht:ref: fig:my_contacts_rayo_refresh --></a> at the beginning of this chapter. To create the
form code, we use the <span 
class="cmti-10">New Form </span>wizard of the Scout SDK as shown in Figure&#x00A0;<a 
href="#x59-7900142">5.42<!--tex4ht:ref: fig:new_form_token --></a>. For the
<span 
class="cmti-10">Name </span>field enter a new translated text &#8221;Refresh LinkedIn Token&#8221; and fill <span 
class="cmtt-10">ui.forms </span>into the
<span 
class="cmti-10">Sub Package </span>field field. Then, click the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button to switch to the second wizard step.
Here, deselect the elements that will not be needed for the implementation of the refresh
form according to the right hand side of Figure&#x00A0;<a 
href="#x59-7900142">5.42<!--tex4ht:ref: fig:new_form_token --></a>. Once the form has been created by the
wizard, add the a <span 
class="cmtt-10">Token </span>and a <span 
class="cmtt-10">Secret </span>form variable of type string under the form&#8217;s <span 
class="cmti-10">Variables</span>
folder.
<!--l. 1293--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7900243"></a>
                                                                                 

                                                                                 

<!--l. 1294--><p class="noindent" ><img 
src="OneDayTutorial/figures/tokenform_securitycode_explorer.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/tokenform_securitycode_properties.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.43: </span><span  
class="content">The token form in the explorer and the properties of the security code field.</span></div><!--tex4ht:label?: x59-7900243 -->
                                                                                 

                                                                                 
<!--l. 1298--><p class="indent" >    </div><hr class="endfigure">
<!--l. 1300--><p class="indent" >    The next step is to add the desired layout and the necessary form fields. First, use the <span 
class="cmti-10">New Form</span>
<span 
class="cmti-10">Field </span>wizard to add a new group box <span 
class="cmtt-10">TokenBox </span>to the <span 
class="cmti-10">MainBox </span>node. And into the <span 
class="cmtt-10">TokenBox </span>add a
&#8221;Security Code&#8221; string field as shown on the left hand side of Figure&#x00A0;<a 
href="#x59-7900243">5.43<!--tex4ht:ref: fig:tokenform_securitycode --></a>. To provide a clickable link that
opens a web browser with the LinkedIn authentication link, add a &#8221;Open Auth URL ...&#8221; link of type
<span 
class="cmtt-10">LinkButton </span>to the main box. To make the user to first click the authentication link button before he tries
to fill any content into the security code field we initially disable this field. For this, first click on the
security code field in the Scout Explorer and then open the <span 
class="cmti-10">Advanced Properties </span>section of the fields
Scout Object Properties. As shown on the right side of Figure&#x00A0;<a 
href="#x59-7900243">5.43<!--tex4ht:ref: fig:tokenform_securitycode --></a>, deselect the <span 
class="cmti-10">Enabled</span>
property.
    <!--l. 1315--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1315--><p class="indent" >    <a 
 id="x59-79003r37"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-79004"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.37:
  </span><span  
class="content">The
  structure
  of
  the
  refresh
  token
  form.
  The
  security
  code
  field
  gets
  enabled
  in
  method
  <span 
class="cmtt-10">execClickAction</span>
  after
  the
  authentication
  link
  button
  is
  pressed.</span></div><!--tex4ht:label?: x59-79003r5.12 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79005r1"></a></span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">RefreshLinkedInTokenForm</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractForm</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79006r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(10.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79007r3"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">MainBox</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractGroupBox</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79008r4"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79009r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(10.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79010r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">TokenBox</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractGroupBox</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79011r7"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79012r8"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(10.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79013r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SecurityCodeField</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractStringField</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79014r10"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79015r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79016r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">boolean</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredEnabled</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79017r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">false</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79018r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79019r15"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79020r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79021r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredLabel</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79022r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">TEXTS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">SecurityCode</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79023r19"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79024r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79025r21"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79026r22"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(40.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79027r23"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">OpenAuthURLButton</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-79028"></a><span 
class="cmssi-10">AbstractLinkButton</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79029r24"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79030r25"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79031r26"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredLabel</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79032r27"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">TEXTS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">OpenAuthURL</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79033r28"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79034r29"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79035r30"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79036r31"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><a 
 id="dx59-79037"></a><span 
class="cmssi-10">execClickAction</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79038r32"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">authUrl</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SERVICES</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getService</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">ILinkedInService</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">)</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getAuthUrl</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79039r33"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SERVICES</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getService</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">IShellService</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">)</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">shellOpen</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">authUrl</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79040r34"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getSecurityCodeField</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">setEnabled</span><span 
class="cmss-10">(</span><span 
class="cmssbx-10">true</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79041r35"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79042r36"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79043r37"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79044r38"></a></span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1317--><p class="indent" >    The implementation of the forms&#8217; structure is provided in Listing&#x00A0;<a 
href="#x59-79003r37">5.37<!--tex4ht:ref: lst:mycontacts.client.forms.refreshtoken --></a>. In the <span 
class="cmtt-10">execClickAction</span>
method of the <span 
class="cmtt-10">OpenAuthURLButton </span>link button the necessary information for the auth link is obtained
from the server. For this, we are using the <span 
class="cmtt-10">getAuthUrl </span>operation implemented in the previous section.
The parameters to create the request token are saved in the form&#8217;s token and secret variables.
Then, the auth link is opened in a web browser with the <span 
class="cmtt-10">shellOpen </span>method of the client&#8217;s
shell service. Finally, after opening the web browser we can enable the security field with
<span 
class="cmtt-10">getSecurityCodeField().setEnabled(true)</span>.
<!--l. 1324--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7904544"></a>
                                                                                 

                                                                                 

<!--l. 1325--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_menu_refreshtoken_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_menu_refreshtoken.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.44: </span><span  
class="content">Add the menu to open the LinkedIn token form.</span></div><!--tex4ht:label?: x59-7904544 -->
                                                                                 

                                                                                 
<!--l. 1329--><p class="indent" >    </div><hr class="endfigure">
<!--l. 1331--><p class="indent" >    We can now integrate the form to refresh the LinkedIn access token under the applications &#8221;File&#8221;
menu. This is done using the <span 
class="cmti-10">New Menu </span>wizard as shown in Figure&#x00A0;<a 
href="#x59-7904544">5.44<!--tex4ht:ref: fig:new_menu_refreshtoken --></a>. Enter the translated text
&#8221;Refresh LinkedIn Token ...&#8221; into the wizard&#8217;s <span 
class="cmti-10">Name </span>field and pick the element <span 
class="cmti-10">Exit Menu [before] </span>from
the dropdown box of the <span 
class="cmti-10">Sibling </span>field. In the <span 
class="cmti-10">Form to start </span>field select the newly created refresh token
form and use the <span 
class="cmti-10">NewHandler </span>entry in the <span 
class="cmti-10">Form Handler </span>field. To close the wizard, click the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span></span>
button.
    <!--l. 1343--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1343--><p class="indent" >    <a 
 id="x59-79046r38"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-79047"></a>

     <div class="caption" 
><span class="id">Listing&#x00A0;5.38:
     </span><span  
class="content">The
     menu
     to
     refresh
     the
     LinkedIn
     token
     starts
     the
     token
     form
     and
     then
     sends
     token
     parameters
     with
     the
     new
     security
     code
     to
     the
     LinkedIn
     backend
     service.</span></div><!--tex4ht:label?: x59-79046r5.12 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79048r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(10.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79049r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">RefreshLinkedInToken</span><span 
class="cmssi-10">_Menu</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractExtensibleMenu</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79050r3"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79051r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79052r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">Set</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmss-10">?</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">IMenuType</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredMenuTypes</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79053r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">CollectionUtility</span><span 
class="cmss-10">.</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmssi-10">IMenuType</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">hashSet</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79054r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79055r8"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79056r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79057r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredText</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79058r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">TEXTS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">RefreshLinkedInToken0</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79059r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79060r13"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79061r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79062r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">execAction</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79063r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">RefreshLinkedInTokenForm</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">form</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">RefreshLinkedInTokenForm</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79064r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">form</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">startNew</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79065r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">form</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">waitFor</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79066r19"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79067r20"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">form</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">isFormStored</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79068r21"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">securityCode</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">form</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getSecurityCodeField</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getValue</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79069r22"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SERVICES</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getService</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">ILinkedInService</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79070r23"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">refreshToken</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">securityCode</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79071r24"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79072r25"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79073r26"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1345--><p class="indent" >    The implementation of the refresh menu is shown in Listing&#x00A0;<a 
href="#x59-79046r38">5.38<!--tex4ht:ref: lst:mycontacts.client.desktop.refreshtokenmenu --></a>. In method <span 
class="cmtt-10">execAction()</span>, we need
to amend the part after starting the refresh token form. If the method <span 
class="cmtt-10">form.isFormStored()</span>
returns <span 
class="cmtt-10">true</span>, the user has modified the secure code field and it is fair to assume that the user
wants to create/refresh his LinkedIn access token. For this, we first retrieve the necessary
parameters to call the backend service operation <span 
class="cmtt-10">refreshToken </span>implemented in the previous
chapter.
<!--l. 1350--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x59-7907645"></a>
                                                                                 

                                                                                 

<!--l. 1351--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_menu_updatecontacts_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_menu_updatecontacts.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.45: </span><span  
class="content">Add the menu to update the LinkedIn contacts.</span></div><!--tex4ht:label?: x59-7907645 -->
                                                                                 

                                                                                 
<!--l. 1355--><p class="indent" >    </div><hr class="endfigure">
    <!--l. 1363--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1363--><p class="indent" >    <a 
 id="x59-79077r39"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x59-79078"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.39:
    </span><span  
class="content">The
    menu
    to
    update
    the
    stored
    persons
    with
    current
    LinkedIn
    data.</span></div><!--tex4ht:label?: x59-79077r5.12 --><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79079r1"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Order</span><span 
class="cmss-10">(20.0)</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79080r2"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">public</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ExportToExcelMenu</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">extends</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">AbstractExtensibleMenu</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79081r3"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79082r4"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79083r5"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">String</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getConfiguredText</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79084r6"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">return</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">TEXTS</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">get</span><span 
class="cmss-10">(</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmbx-10">ExportToExcelMenu</span><span 
class="cmbx-10">&#8221;</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79085r7"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79086r8"></a></span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79087r9"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">@Override</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79088r10"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">protected</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">void</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">execAction</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">throws</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ProcessingException</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79089r11"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">if</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">getOutline</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">!=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&amp;&amp;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getOutline</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getActivePage</span><span 
class="cmss-10">()</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">!=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">)</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79090r12"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ScoutXlsxSpreadsheetAdapter</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">s</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssbx-10">new</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">ScoutXlsxSpreadsheetAdapter</span><span 
class="cmss-10">()</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79091r13"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">File</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">xlsx</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">=</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">s</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">exportPage</span><span 
class="cmss-10">(</span><span 
class="cmssbx-10">null</span><span 
class="cmss-10">,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">0,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">0,</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">getOutline</span><span 
class="cmss-10">()</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getActivePage</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79092r14"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmssi-10">SERVICES</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getService</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">IShellService</span><span 
class="cmss-10">.</span><span 
class="cmssbx-10">class</span><span 
class="cmss-10">)</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">shellOpen</span><span 
class="cmss-10">(</span><span 
class="cmssi-10">xlsx</span><span 
class="cmss-10">.</span><span 
class="cmssi-10">getAbsolutePath</span><span 
class="cmss-10">()</span><span 
class="cmss-10">)</span><span 
class="cmss-10">;</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79093r15"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79094r16"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79095r17"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmss-10">&#x00A0;</span><br /><span class="label"><a 
 id="x59-79096r18"></a></span><span 
class="cmss-10">&#x00A0;</span><span 
class="cmsy-10">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1365--><p class="indent" >    As the last missing component of the &#8221;My Contacts&#8221; application, we add the menu to fetch the
LinkedIn contacts and update the database accordingly. The menu entry is created as a sub menu of the
&#8221;Tools&#8221; menu. For this, use the new menu wizard on the <span 
class="cmti-10">ToolsMenu </span>node as shown in Figure&#x00A0;<a 
href="#x59-7907645">5.45<!--tex4ht:ref: fig:new_menu_updatecontacts --></a>. The
implementation of the menu&#8217;s <span 
class="cmtt-10">execAction </span>method shown in Listing&#x00A0;<a 
href="#x59-79077r39">5.39<!--tex4ht:ref: lst:mycontacts.client.desktop.updatecontacts --></a> is trivial. We only need to call
the operation of the <span 
class="cmtt-10">LinkedInService </span>implemented in the server part of the &#8221;My Contacts&#8221;
application.
                                                                                 

                                                                                 
                                                                                 

                                                                                 
    <!--l. 90--><div class="crosslinks"><p class="noindent">[<a 
href="scout_introap1.html" >next</a>] [<a 
href="scout_introch5.html" >prev</a>] [<a 
href="scout_introch5.html#tailscout_introch5.html" >prev-tail</a>] [<a 
href="scout_introch6.html" >front</a>] [<a 
href="scout_intro.html" >up</a>] </p></div>
<!--l. 90--><p class="indent" >    <a 
 id="tailscout_introch6.html"></a>   
</body></html> 
